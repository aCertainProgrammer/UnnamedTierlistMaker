(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();function St(W){if(W==null)return"";let e="";e+=W[0].toUpperCase();for(let t=1;t<W.length;t++)e+=W[t];return e}function Dt(W){switch(W){case"aurelionsol":W="Aurelion Sol";break;case"belveth":W="Bel'Veth";break;case"chogath":W="Cho'Gath";break;case"drmundo":W="Dr. Mundo";break;case"ksante":W="K'Sante";break;case"kaisa":W="Kai'sa";break;case"khazix":W="Kha'Zix";break;case"kogmaw":W="Kog'Maw";break;case"leesin":W="Lee Sin";break;case"masteryi":W="Master Yi";break;case"missfortune":W="Miss Fortune";break;case"reksai":W="Rek'Sai";break;case"tahmkench":W="Tahm Kench";break;case"twistedfate":W="Twisted Fate";break;case"velkoz":W="Vel'Koz";break;case"xinzhao":W="Xin Zhao";break;default:W=St(W)}return W}async function Wt(W){return W.text()}function Rt(W,e){const t=new Blob([JSON.stringify(W,null,4)],{type:"plain/text"}),l=URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=e,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function Yt(W,e){const t=document.createElement("a");t.href=W,t.download=e,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}class Qt{constructor(e,t,l,s){this.tierlistViewModel=e,this.tier=t,this.tierIndex=l,this.notificationCenter=s,this.notificationCenter.subscribe("key",this.handleKeyboardInput.bind(this)),this.tierEditorOverlay=null,this.render()}render(){this.tierEditorOverlay=document.createElement("div"),this.tierEditorOverlay.id="tier-editor-overlay",this.tierEditorOverlay.addEventListener("click",()=>{this.die()});const e=this.createTierEditor(this.tier,this.tierIndex);this.tierEditorOverlay.appendChild(e),document.body.appendChild(this.tierEditorOverlay)}sendTierlistRenderSignal(){this.notificationCenter.publish("refreshTierlist")}createTierEditor(e,t){const l=document.createElement("div");l.classList.add("tier-editor-container"),l.addEventListener("click",()=>{event.stopPropagation()});const s=document.createElement("input");s.type="text",s.value=e.name,s.classList.add("tier-name-editor"),s.addEventListener("input",this.changeTierName.bind(this,t)),l.appendChild(s);const n=this.createTierColorEditor(t);l.appendChild(n);const a=document.createElement("input");return a.classList.add("normal-button"),a.id="tier-removal-button",a.type="button",a.value="Remove tier",a.addEventListener("click",this.removeTier.bind(this,t)),l.appendChild(a),l}createTierColorEditor(e){const t=document.createElement("div"),l=["deepskyblue","limegreen","greenyellow","yellow","orange","tomato"];for(let s=0;s<l.length;s++){const n=document.createElement("input");n.type="button",n.classList.add("tier-color-button"),n.classList.add("normal-button"),n.style.backgroundColor=l[s],n.addEventListener("click",this.changeTierColor.bind(this,e,l[s])),t.appendChild(n)}return t}removeTier(e){this.tierlistViewModel.removeTier(e),this.die(),this.sendTierlistRenderSignal()}changeTierName(e){this.tierlistViewModel.changeTierName(e,event.target.value.trim()),this.sendTierlistRenderSignal()}changeTierColor(e,t){this.tierlistViewModel.changeTierColor(e,t),this.sendTierlistRenderSignal()}handleKeyboardInput(e){if(e.target!="tierEditorOverlay")return;const t=document.querySelector(".tier-name-editor"),l=e.key,s=/^[A-Za-z]$/;if(l.match(s)){document.activeElement!=t&&(t.value=""),t.focus();return}if(l=="Escape"){this.die();return}const n=/[0-9]/,a=this.tierEditorOverlay.querySelectorAll(".tier-color-button");l.match(n)&&l.length==1&&this.activeElement!=t&&l!=0&&!(l-1>=a.length)&&a[l-1].click()}die(){this.tierEditorOverlay.innerHTML="",this.tierEditorOverlay.remove(),this.notificationCenter.unsubscribe("key",this.handleKeyboardInput.bind(this))}}class te{constructor(e,t,l,s,n){this.tierViewModel=e,this.tierlistViewModel=t,this.tierContainer=l,this.tierlistRenderSignal=s,this.tierIndex=n;const a=this.tierViewModel.getTier();this.tierName=document.createElement("div"),this.tierName.classList="tier-name",this.tierName.innerHTML=a.name,this.tierName.style.backgroundColor=a.color,this.tierName.addEventListener("click",this.createTierEditor.bind(this)),this.tierContainer.appendChild(this.tierName),this.tierChampions=document.createElement("div"),this.tierChampions.classList="tier-champions",this.tierContainer.appendChild(this.tierChampions),this.tierSwappingContainer=document.createElement("div"),this.tierSwappingContainer.classList.add("tier-swapping-container"),this.tierUpArrow=document.createElement("img"),this.tierUpArrow.classList.add("tier-swapping-arrow"),this.tierUpArrow.src="./assets/img/up-arrow.png",this.tierUpArrow.draggable=!1,this.tierUpArrow.addEventListener("click",this.swapTierUp.bind(this)),this.tierSwappingContainer.appendChild(this.tierUpArrow),this.tierDownArrow=document.createElement("img"),this.tierDownArrow.classList.add("tier-swapping-arrow"),this.tierDownArrow.src="./assets/img/down-arrow.png",this.tierDownArrow.draggable=!1,this.tierDownArrow.addEventListener("click",this.swapTierDown.bind(this)),this.tierSwappingContainer.appendChild(this.tierDownArrow),this.tierContainer.appendChild(this.tierSwappingContainer),this.dragData={championIndex:null,x:null,y:null},this.currentDummy=null,this.championDragIndex=-1,this.imageSize=80,this.tierNameSize=80,this.swapArrowsSize=80,this.dropFunction=function(){event.stopPropagation();const d=JSON.parse(event.dataTransfer.getData("text/plain")).champion;this.tierViewModel.removeChampion("dummy"),this.tierViewModel.addChampionAtIndex(d,this.dragData.championIndex),this.sendTierlistRenderSignal()},this.tierChampions.addEventListener("drop",this.dropFunction.bind(this)),this.tierChampions.addEventListener("dragover",()=>{event.preventDefault();const o=JSON.parse(event.dataTransfer.getData("text/plain"));this.currentDummy=o.champion;const d=this.tierChampions.getBoundingClientRect();this.dragData.x=parseInt(event.clientX-d.left),this.dragData.y=event.clientY-d.top;const m=parseInt(d.width/this.imageSize),k=parseInt(d.bottom-d.top),b=this.findCurrentRow(this.dragData.y,k),_=this.findCurrentColumn(this.dragData.x,d.width);let h=b*m+_;const c=this.tierViewModel.getTier().champions.length;h>c&&(h=c),this.championDragIndex!=h&&(this.tierViewModel.removeChampion("dummy"),this.tierViewModel.addChampionAtIndex("dummy",h),this.render()),this.championDragIndex=h,this.dragData.championIndex=h}),this.tierChampions.addEventListener("dragleave",()=>{this.tierViewModel.removeChampion("dummy");const o=this.tierChampions.getBoundingClientRect(),d=parseInt(event.clientX-o.left),m=event.clientY-o.top;if(m<=0||d<=0||d>=o.width||m>=o.height){const k=document.querySelectorAll("[data-champion='dummy']");if(k!=null)for(let b=0;b<k.length;b++)k[b].remove()}this.dragData.championIndex=-1})}render(){const e=this.getChampionIconPadding(),t=this.getNameOnHoverSetting(),l=this.tierViewModel.getTier();this.tierChampions.innerHTML="";for(let s=0;s<l.champions.length;s++){const n=this.createChampionIcon(this.tierIndex,l.champions[s],e,t);this.tierChampions.appendChild(n)}return this.tierContainer}createChampionIcon(e,t,l,s){const n=document.createElement("img");return n.classList="champion-icon",n.dataset.champion=t,t=="dummy"&&(t=this.currentDummy,n.style.opacity="0.5"),n.src="./assets/img/champion_icons/"+St(t)+".webp",n.style.padding=l+"px",n.addEventListener("dragstart",()=>{const a=document.createElement("img");a.src=event.target.src,a.id="drag-image";const o=event.target.offsetWidth,d=event.target.offsetHeight;document.body.appendChild(a),event.dataTransfer.setDragImage(a,o/2,d/2);const m=JSON.stringify({tier:e,champion:t});event.dataTransfer.clearData(),event.dataTransfer.setData("text/plain",m),this.tierViewModel.removeChampion(t)}),n.addEventListener("dragend",()=>{event.preventDefault();const a=document.querySelector("#drag-image");document.body.removeChild(a)}),s&&(n.addEventListener("mouseenter",()=>{const a=document.createElement("div");a.classList.add("champion-name-container-on-hover"),a.innerText=Dt(t),document.body.appendChild(a);const o=n.getBoundingClientRect(),d=a.getBoundingClientRect(),m=parseInt(d.width);a.style.top=parseInt(o.y-30)+"px",a.style.left=parseInt(o.x+40-m/2)+"px"}),n.addEventListener("mouseleave",()=>{const a=document.querySelectorAll(".champion-name-container-on-hover");if(a!=null)for(let o=0;o<a.length;o++)a[o].remove()})),n}findCurrentRow(e,t){const l=this.imageSize/2;for(let s=0;s*this.imageSize<=t;s++)if(s*this.imageSize-l<e&&(s+1)*this.imageSize-l>=e)return s;return 0}findCurrentColumn(e,t){const l=this.imageSize/2;for(let s=0;s*this.imageSize<=t;s++)if(s*this.imageSize-l<e&&(s+1)*this.imageSize-l>=e)return s;return 0}sendTierlistRenderSignal(){this.tierlistRenderSignal()}swapTierUp(){this.tierlistViewModel.swapTierUp(this.tierIndex),this.sendTierlistRenderSignal()}swapTierDown(){this.tierlistViewModel.swapTierDown(this.tierIndex),this.sendTierlistRenderSignal()}getChampionIconPadding(){return this.tierViewModel.getChampionIconPadding()}getNameOnHoverSetting(){return this.tierViewModel.getNameOnHoverSetting()}createTierEditor(){const e=this.tierViewModel.getTier();new Qt(this.tierlistViewModel,e,this.tierIndex,this.tierViewModel.notificationCenter)}}class ee{constructor(e){this.tierlistViewModel=e,this.notificationCenter=this.tierlistViewModel.notificationCenter,this.tierlistContainer=document.getElementById("tierlist"),this.tierlistEditor=document.getElementById("tierlist-editor"),this.tierViews=[],this.notificationCenter.subscribe("refreshTierlist",this.render.bind(this)),this.notificationCenter.subscribe("championIconPaddingChanged",this.render.bind(this)),this.notificationCenter.subscribe("championNamesDisplayOnHoverInTheTierlistChanged",this.render.bind(this)),this.name=this.tierlistViewModel.name}render(){this.tierViews=[],this.tierlistContainer.innerHTML="",this.name=this.tierlistViewModel.name;const e=document.createElement("input");e.type="text",e.id="tierlist-name",e.classList.add("tierlist-name"),e.value=this.name,e.addEventListener("input",this.changeTierlistName.bind(this)),this.tierlistContainer.appendChild(e);for(let l=0;l<this.tierlistViewModel.tierViewModels.length;l++)this.createTierContainer(l);this.tierlistViewModel.removeDummies();for(let l=0;l<this.tierViews.length;l++){const s=this.tierViews[l].render();this.tierlistContainer.appendChild(s)}const t=document.createElement("input");t.classList.add("tierlist-addition-element"),t.type="button",t.value="+ Add tier",t.addEventListener("click",()=>{this.addTier()}),this.tierlistContainer.appendChild(t)}addTier(){this.tierlistViewModel.addTier(),this.createTierContainer(this.tierViews.length),this.render()}createTierContainer(e){const t=document.createElement("div");t.classList.add("tier-container"),this.tierlistContainer.appendChild(t);const l=new te(this.tierlistViewModel.tierViewModels[e],this.tierlistViewModel,t,this.render.bind(this),e);this.tierViews.push(l)}changeTierlistName(e){this.tierlistViewModel.changeTierlistName(e.target.value.trim())}}class ie{constructor(e){this.championSelectionViewModel=e,this.notificationCenter=this.championSelectionViewModel.notificationCenter,this.championSelection=document.getElementById("champion-selection"),this.searchBar=document.getElementById("champion-selection-search-bar"),this.searchBar.addEventListener("input",this.searchChampions.bind(this)),this.searchBar.value!=""&&this.searchChampions(),this.notificationCenter.subscribe("key",this.handleKeyEvent.bind(this)),this.notificationCenter.subscribe("championNamesDisplayOnHoverInTheChampionSelectionChanged",this.render.bind(this))}render(){this.championSelection.innerHTML="";const e=document.querySelectorAll(".champion-name-container-on-hover");if(e!=null)for(let s=0;s<e.length;s++)e[s].remove();const t=this.championSelectionViewModel.getChampions(),l=this.championSelectionViewModel.getNameOnHoverSetting();for(let s=0;s<t.length;s++)this.createChampionIcon(t[s],l)}createChampionIcon(e,t){const l=document.createElement("img");l.classList="champion-icon",l.src="./assets/img/champion_icons/"+St(e)+".webp",l.alt=e,l.draggable=!0,this.championSelection.appendChild(l),l.addEventListener("dragstart",()=>{const s=document.createElement("img");s.src=event.target.src,s.id="drag-image";const n=event.target.offsetWidth,a=event.target.offsetHeight;document.body.appendChild(s),event.dataTransfer.setDragImage(s,n/2,a/2);const o=JSON.stringify({tier:null,champion:e});event.dataTransfer.clearData(),event.dataTransfer.setData("text/plain",o)}),l.addEventListener("dragend",()=>{event.preventDefault();const s=document.querySelector("#drag-image");document.body.removeChild(s)}),t&&(l.addEventListener("mouseenter",()=>{const s=document.createElement("div");s.classList.add("champion-name-container-on-hover"),s.innerText=Dt(e),document.body.appendChild(s);const n=l.getBoundingClientRect(),a=s.getBoundingClientRect(),o=parseInt(a.width);s.style.top=parseInt(n.y-30)+"px",s.style.left=parseInt(n.x+40-o/2)+"px"}),l.addEventListener("mouseleave",()=>{const s=document.querySelector(".champion-name-container-on-hover");s!=null&&s.remove()}))}searchChampions(){const e=this.searchBar.value.trim().toLowerCase();this.championSelectionViewModel.searchChampions(e),this.render()}handleKeyEvent(e){if(e.shift){this.searchBar.blur();return}if(e.target!="mainScreen"){this.searchBar.blur();return}const t=e.key,l=/^[A-Za-z]$/;if(t.match(l)){document.activeElement!=this.searchBar&&(this.searchBar.value=""),this.searchBar.focus();return}else if(t=="Backspace"){if(document.activeElement!=this.searchBar){this.searchBar.focus();const s=this.searchBar.value.length;this.searchBar.setSelectionRange(s,s)}}else t=="Escape"?(this.searchBar.value="",this.searchBar.blur(),this.searchChampions()):this.searchBar.blur()}}class ne{constructor(e){this.utilsViewModel=e,this.notificationCenter=this.utilsViewModel.notificationCenter,this.notificationCenter.subscribe("key",this.handleKeyInput.bind(this)),this.notificationCenter.subscribe("clickSnapshotsToggle",this.toggleSnapshots.bind(this)),this.utilsContainer=document.querySelector("#utils"),this.openSettingsButton=document.createElement("button");const t=document.createElement("img");this.openSettingsButton.classList+="util-icon",t.src="./assets/img/settings-cog.webp",this.openSettingsButton.appendChild(t),this.openSettingsButton.addEventListener("click",()=>{this.notificationCenter.publish("openSettings")}),this.utilsContainer.appendChild(this.openSettingsButton),this.openManualButton=document.createElement("button"),this.openManualButton.classList.add("util-icon");const l=document.createElement("img");l.src="./assets/img/question-mark.webp",this.openManualButton.appendChild(l),this.openManualButton.addEventListener("click",()=>{this.notificationCenter.publish("openManual")}),this.utilsContainer.appendChild(this.openManualButton),this.exportPngButton=document.createElement("button"),this.exportPngButton.classList.add("util-icon");const s=document.createElement("img");s.src="./assets/img/screenshot.webp",this.exportPngButton.appendChild(s),this.exportPngButton.addEventListener("click",this.exportPng.bind(this)),this.utilsContainer.appendChild(this.exportPngButton),this.clearTierlistButton=document.createElement("input"),this.clearTierlistButton.type="button",this.clearTierlistButton.value="Reset tierlist",this.clearTierlistButton.classList.add("normal-button"),this.clearTierlistButton.addEventListener("click",this.clearTierlist.bind(this)),this.utilsContainer.appendChild(this.clearTierlistButton),this.exportTierlistButton=document.createElement("input"),this.exportTierlistButton.type="button",this.exportTierlistButton.value="Export tierlist",this.exportTierlistButton.classList.add("normal-button"),this.utilsContainer.appendChild(this.exportTierlistButton),this.exportTierlistButton.addEventListener("click",this.exportTierlist.bind(this)),this.importTierlistInput=document.createElement("input"),this.importTierlistInput.type="file",this.importTierlistInput.classList.add("hidden"),this.utilsContainer.appendChild(this.importTierlistInput),this.importTierlistInput.addEventListener("input",this.importTierlist.bind(this)),this.importTierlistButton=document.createElement("input"),this.importTierlistButton.type="button",this.importTierlistButton.value="Import tierlist",this.importTierlistButton.classList.add("normal-button"),this.importTierlistButton.addEventListener("click",this.clickInput.bind(this,this.importTierlistInput)),this.utilsContainer.appendChild(this.importTierlistButton),this.usePoolTemplateButton=document.createElement("input"),this.usePoolTemplateButton.type="button",this.usePoolTemplateButton.value="Use draft pool template",this.usePoolTemplateButton.classList.add("normal-button"),this.usePoolTemplateButton.addEventListener("click",this.usePoolTemplate.bind(this)),this.utilsContainer.appendChild(this.usePoolTemplateButton),this.exportDraftPoolButton=document.createElement("input"),this.exportDraftPoolButton.type="button",this.exportDraftPoolButton.value="Export draft pool",this.exportDraftPoolButton.classList.add("normal-button"),this.exportDraftPoolButton.addEventListener("click",this.exportPoolTemplate.bind(this)),this.utilsContainer.appendChild(this.exportDraftPoolButton),this.toggleSnapshotsButton=document.createElement("input"),this.toggleSnapshotsButton.type="button",this.toggleSnapshotsButton.id="toggle-snapshots-button",this.toggleSnapshotsButton.value="Show snapshots",this.toggleSnapshotsButton.classList.add("normal-button"),this.toggleSnapshotsButton.addEventListener("click",this.toggleSnapshots.bind(this)),this.utilsContainer.appendChild(this.toggleSnapshotsButton),this.saveSnapshotButton=document.createElement("input"),this.saveSnapshotButton.type="button",this.saveSnapshotButton.value="Save snapshot",this.saveSnapshotButton.classList.add("normal-button"),this.saveSnapshotButton.addEventListener("click",this.saveSnapshot.bind(this)),this.utilsContainer.appendChild(this.saveSnapshotButton)}render(){}clearTierlist(){this.utilsViewModel.clearTierlist()}exportTierlist(){this.utilsViewModel.exportTierlist()}clickInput(e){e.click()}importTierlist(e){this.utilsViewModel.importTierlist(e)}usePoolTemplate(){this.utilsViewModel.usePoolTemplate()}exportPoolTemplate(){this.utilsViewModel.exportPoolTemplate()}exportPng(){this.utilsViewModel.exportPng()}toggleSnapshots(){this.toggleSnapshotsButton.value=this.toggleSnapshotsButton.value=="Show snapshots"?"Hide snapshots":"Show snapshots",this.utilsViewModel.toggleSnapshots()}saveSnapshot(){this.utilsViewModel.saveSnapshot()}handleKeyInput(e){if(e.target!="mainScreen")return;const t=e.key,l=e.shift;e.target!="tierName"&&l&&(t.toLowerCase()=="g"&&this.clickInput(this.toggleSnapshotsButton),t.toLowerCase()=="v"&&this.clickInput(this.saveSnapshotButton),t.toLowerCase()=="s"&&this.clickInput(this.openSettingsButton),t.toLowerCase()=="m"&&this.clickInput(this.openManualButton))}}class re{constructor(e){this.visible=!0,this.mainScreenViewModel=e,this.mainScreen=document.getElementById("main-screen"),this.mainScreen.addEventListener("drop",this.dropFunction.bind(this)),this.mainScreen.addEventListener("dragover",()=>{event.preventDefault()}),this.utilsView=new ne(this.mainScreenViewModel.utilsViewModel),this.tierlistView=new ee(this.mainScreenViewModel.tierlistViewModel),this.championSelectionView=new ie(this.mainScreenViewModel.championSelectionViewModel)}render(){this.utilsView.render(),this.tierlistView.render(),this.championSelectionView.render()}dropFunction(e){this.mainScreenViewModel.handleDrop(e),this.render()}}class se{constructor(e){this.settingsViewModel=e,this.notificationCenter=this.settingsViewModel.notificationCenter,this.notificationCenter.subscribe("openSettings",this.openSettings.bind(this)),this.notificationCenter.subscribe("key",this.handleKeyInput.bind(this)),this.settingsContainer=document.getElementById("settings-container"),this.visible=!1;const t=this.settingsViewModel.getSettings();this.closeSettingsButton=document.getElementById("close-settings-button"),this.closeSettingsButton.addEventListener("click",()=>{this.visible=!1,this.render()}),this.resetSettingsButton=document.getElementById("reset-settings-button"),this.resetSettingsButton.addEventListener("click",this.resetSettings.bind(this)),this.championIconPaddingSetter=document.getElementById("champion-icon-padding-setter"),this.championIconPaddingSetter.value=t.championIconPadding,this.championIconPaddingSetter.addEventListener("input",this.setChampionIconPadding.bind(this)),this.championNamesOnHoverTierlistToggle=document.getElementById("champion-names-on-hover-tierlist-toggle"),this.championNamesOnHoverTierlistToggle.addEventListener("click",this.setChampionNamesOnHoverInTheTierlist.bind(this)),this.championNamesOnHoverChampionSelectionToggle=document.getElementById("champion-names-on-hover-champion-selection-toggle"),this.championNamesOnHoverChampionSelectionToggle.addEventListener("click",this.setChampionNamesOnHoverInTheChampionSelection.bind(this)),this.tierlistPreview=this.createTierlistPreview(),this.notSettingsUtils=document.getElementById("not-settings-utils"),this.notSettingsUtils.appendChild(this.tierlistPreview)}render(){if(this.visible==!1){this.settingsContainer.classList.contains("hidden")||this.settingsContainer.classList.add("hidden");return}this.settingsContainer.classList.contains("hidden")&&this.settingsContainer.classList.remove("hidden"),this.tierlistPreview.remove(),this.tierlistPreview=this.createTierlistPreview(),this.notSettingsUtils.appendChild(this.tierlistPreview),this.colorSettingsButtons()}openSettings(){this.visible=!0,this.render()}handleKeyInput(e){if(e.target!="settingsScreen")return;const t=e.key;e.shift&&t.toLowerCase()=="s"&&this.closeSettingsButton.click()}setChampionIconPadding(){let e=event.target.value.trim();e<0&&(event.target.value=0,e=0),e>40&&(event.target.value=40,e=40),this.settingsViewModel.setChampionIconPadding(e),this.render()}setChampionNamesOnHoverInTheTierlist(){this.settingsViewModel.setChampionNamesOnHoverInTheTierlist(),this.colorSettingsButtons(),this.render()}setChampionNamesOnHoverInTheChampionSelection(){this.settingsViewModel.setChampionNamesOnHoverInTheChampionSelection(),this.colorSettingsButtons()}colorSettingsButtons(){const e=this.settingsViewModel.getSettings(),t=[this.championNamesOnHoverTierlistToggle,this.championNamesOnHoverChampionSelectionToggle],l=[e.championNamesDisplayOnHoverInTheTierlist,e.championNamesDisplayOnHoverInTheChampionSelection];for(let s=0;s<t.length;s++)l[s]==!0?(t[s].dataset.state="on",t[s].value="On"):(t[s].dataset.state="off",t[s].value="Off")}createTierlistPreview(){const e=document.createElement("div");e.classList.add("tierlist-container"),e.classList.add("tierlist-preview-container");const t={name:"SKT tierlist",tiers:[{name:"Toplane",champions:["camille","ornn","renekton","jayce"],color:"deepskyblue"},{name:"Jungle",champions:["vi","wukong","lillia"],color:"limegreen"},{name:"Midlane",champions:["syndra","viktor","azir"],color:"yellow"},{name:"Botlane",champions:["missfortune","kaisa","xayah"],color:"orange"},{name:"Support",champions:["rell","leona","nautilus","alistar","rakan"],color:"tomato"}]},l=document.createElement("input");l.type="text",l.classList.add("tierlist-name"),l.value=t.name,e.appendChild(l);const s=document.createElement("div");s.classList.add("tierlist");for(let n=0;n<t.tiers.length;n++){const a=this.createTierlistPreviewTier(t.tiers[n]);s.appendChild(a)}return e.appendChild(s),e}createTierlistPreviewTier(e){const t=document.createElement("div");t.classList.add("tier-container");const l=document.createElement("div");l.classList.add("tier-name"),l.style.backgroundColor=e.color,l.innerText=e.name,t.appendChild(l);const s=document.createElement("div");s.classList.add("tier-champions");const n=this.settingsViewModel.getSettings(),a=n.championIconPadding,o=n.championNamesDisplayOnHoverInTheTierlist;for(let d=0;d<e.champions.length;d++){const m=this.createChampionIcon(e.champions[d],a,o);s.appendChild(m)}return t.appendChild(s),t}createChampionIcon(e,t,l){const s=document.createElement("img");return s.classList.add("champion-icon"),s.src="./assets/img/champion_icons/"+St(e)+".webp",s.style.padding=t+"px",s.draggable=!1,l&&(s.addEventListener("mouseenter",()=>{const n=document.createElement("div");n.classList.add("champion-name-container-on-hover"),n.innerText=Dt(e),document.body.appendChild(n);const a=s.getBoundingClientRect(),o=n.getBoundingClientRect(),d=parseInt(o.width);n.style.top=parseInt(a.y-30)+"px",n.style.left=parseInt(a.x+40-d/2)+"px"}),s.addEventListener("mouseleave",()=>{const n=document.querySelectorAll(".champion-name-container-on-hover");if(n!=null)for(let a=0;a<n.length;a++)n[a].remove()})),s}resetSettings(){this.settingsViewModel.resetSettings(),this.colorSettingsButtons();const e=this.settingsViewModel.getSettings();this.championIconPaddingSetter.value=e.championIconPadding,this.render()}}class ae extends HTMLElement{get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get auto(){return!this.hasAttribute("no-auto")}get bodyClass(){const e=this.getAttribute("body-class");return`markdown-body${e?" "+e:""}`}constructor(){super();try{this.version="3.1.7"}catch{}this.template="";const e=t=>{var l;if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey||t.defaultPrevented)return;const s=(l=t.target)==null?void 0:l.closest("a");s&&s.hash&&s.host===location.host&&s.pathname===location.pathname&&this.goto(s.hash)};this._clicked=e.bind(this),this._observer=new MutationObserver(()=>{this._observe(),this.auto&&this.render()}),this._loaded=!1,this.root=this}static get observedAttributes(){return["src","body-class"]}attributeChangedCallback(e,t,l){var s;if(this.ready&&t!==l)switch(e){case"body-class":(s=this.root.querySelector(".markdown-body"))==null||s.setAttribute("class",this.bodyClass);break;case"src":this.auto&&this.render()}}async connectedCallback(){var e;this._loaded||(await this.load(),this.hasAttribute("no-shadow")||(this.root=this.attachShadow({mode:"open"})),this.root.prepend(this.frag(`<div class="markdown-styles"></div><div class="${this.bodyClass}"></div>`)),this._loaded=!0),(e=this.shadowRoot)==null||e.addEventListener("click",this._clicked),this._observer.observe(this,{childList:!0}),this._observe(),this.ready=!0,this.fire("zero-md-ready"),this.auto&&this.render()}disconnectedCallback(){var e;(e=this.shadowRoot)==null||e.removeEventListener("click",this._clicked),this._observer.disconnect(),this.ready=!1}_observe(){this.querySelectorAll('template,script[type="text/markdown"]').forEach(e=>this._observer.observe(e.content||e,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}async load(){}async parse({text:e=""}){return e}goto(e){var t;const l=this.shadowRoot||document;e&&((t=l.getElementById(decodeURIComponent(e[0]==="#"?e.slice(1):e)))==null||t.scrollIntoView())}frag(e){const t=document.createElement("template");return t.innerHTML=e,t.content}hash(e){let t=5381;for(let l=0;l<e.length;l++)t=(t<<5)+t^e.charCodeAt(l);return(t>>>0).toString(36)}tick(){return new Promise(e=>requestAnimationFrame(e))}fire(e,t={}){this.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0}))}async read(e){const{target:t}=e,l=(s="",n="")=>{var a;const o=this.hash(s),d=((a=this.root.querySelector(`.markdown-${t}`))==null?void 0:a.getAttribute("data-hash"))!==o;return{...e,text:s,hash:o,changed:d,baseUrl:n}};switch(t){case"styles":{const s=(n="")=>{var a;return(a=this.querySelector(n))==null?void 0:a.innerHTML};return l((s("template[data-prepend]")??"")+(s("template:not([data-prepend],[data-append])")??this.template)+(s("template[data-append]")??""))}case"body":{if(this.src){const n=await fetch(this.src);if(n.ok){const a=()=>{const o=document.createElement("a");return o.href=this.src||"",o.href.substring(0,o.href.lastIndexOf("/")+1)};return l(await n.text(),a())}else console.warn("[zero-md] error reading src",this.src)}const s=this.querySelector('script[type="text/markdown"]');return l((s==null?void 0:s.text)||"")}default:return l()}}async stamp(e){const{target:t,text:l="",hash:s=""}=e,n=this.root.querySelector(`.markdown-${t}`);if(!n)return e;n.setAttribute("data-hash",s);const a=this.frag(l),o=Array.from(a.querySelectorAll('link[rel="stylesheet"]')||[]),d=Promise.all(o.map(m=>new Promise(k=>{m.onload=k,m.onerror=b=>{console.warn("[zero-md] error loading stylesheet",m.href),k(b)}})));return n.innerHTML="",n.append(a),await d,{...e,stamped:!0}}async render({fire:e=!0,goto:t=location.hash}={}){const l=await this.read({target:"styles"}),s=l.changed&&this.stamp(l),n=await this.read({target:"body"});if(n.changed){const o=this.parse(n);await s,await this.tick(),await this.stamp({...n,text:await o})}else await s;await this.tick();const a={styles:l.changed,body:n.changed};return e&&this.fire("zero-md-rendered",a),this.auto&&t&&this.goto(t),a}}const oe=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,le=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,he=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function ce(W={}){return{extensions:[de(W,Ut()),ue(W,Ut())]}}function Ut(){return W=>W.text}function de(W,e){const t=W&&W.nonStandard,l=t?le:oe;return{name:"inlineKatex",level:"inline",start(s){let n,a=s;for(;a;){if(n=a.indexOf("$"),n===-1)return;if((t?n>-1:n===0||a.charAt(n-1)===" ")&&a.substring(n).match(l))return n;a=a.substring(n+1).replace(/^\$+/,"")}},tokenizer(s,n){const a=s.match(l);if(a)return{type:"inlineKatex",raw:a[0],text:a[2].trim(),displayMode:a[1].length===2}},renderer:e}}function ue(W,e){return{name:"blockKatex",level:"block",tokenizer(t,l){const s=t.match(he);if(s)return{type:"blockKatex",raw:s[0],text:s[2].trim(),displayMode:s[1].length===2}},renderer:e}}const dt=W=>`https://cdn.jsdelivr.net/npm/${W}`,bt=(W,e)=>`<link rel="stylesheet" href="${W}"${e?` ${e}`:""}>`,gt=async(W,e="default")=>(await import(W))[e],Zt={HOST:"<style>:host{display:block;position:relative;contain:content;}:host([hidden]){display:none;}</style>",MARKDOWN:bt(dt("github-markdown-css@5/github-markdown.min.css")),MARKDOWN_LIGHT:bt(dt("github-markdown-css@5/github-markdown-light.min.css")),MARKDOWN_DARK:bt(dt("github-markdown-css@5/github-markdown-dark.min.css")),HIGHLIGHT_LIGHT:bt(dt("@highlightjs/cdn-assets@11/styles/github.min.css")),HIGHLIGHT_DARK:bt(dt("@highlightjs/cdn-assets@11/styles/github-dark.min.css")),HIGHLIGHT_PREFERS_DARK:bt(dt("@highlightjs/cdn-assets@11/styles/github-dark.min.css"),'media="(prefers-color-scheme:dark)"'),KATEX:bt(dt("katex@0/dist/katex.min.css")),preset(W=""){const{HOST:e,MARKDOWN:t,MARKDOWN_LIGHT:l,MARKDOWN_DARK:s,HIGHLIGHT_LIGHT:n,HIGHLIGHT_DARK:a,HIGHLIGHT_PREFERS_DARK:o,KATEX:d}=this,m=k=>`${e}${k}${d}`;switch(W){case"light":return m(l+n);case"dark":return m(s+a);default:return m(t+n+o)}}},fe={marked:async()=>{const W=await gt(dt("marked@15/lib/marked.esm.js"),"Marked");return new W({async:!0})},markedBaseUrl:()=>gt(dt("marked-base-url@1/+esm"),"baseUrl"),markedHighlight:()=>gt(dt("marked-highlight@2/+esm"),"markedHighlight"),markedGfmHeadingId:()=>gt(dt("marked-gfm-heading-id@4/+esm"),"gfmHeadingId"),markedAlert:()=>gt(dt("marked-alert@2/+esm")),hljs:()=>gt(dt("@highlightjs/cdn-assets@11/es/highlight.min.js")),mermaid:()=>gt(dt("mermaid@11/dist/mermaid.esm.min.mjs")),katex:()=>gt(dt("katex@0/dist/katex.mjs"))};let Ct,Tt,Mt,pe=0;class Kt extends ae{async load(e={}){const{marked:t,markedBaseUrl:l,markedHighlight:s,markedGfmHeadingId:n,markedAlert:a,hljs:o,mermaid:d,katex:m,katexOptions:k={nonStandard:!0,throwOnError:!1}}={...fe,...e};this.template=Zt.preset();const b=await Promise.all([t(),l(),n(),a(),s()]);this.marked=b[0],this.setBaseUrl=b[1];const _=async(h,g)=>(Mt||(Mt=await m()),Mt.renderToString(h,{displayMode:g,...k}));this.marked.use(b[2](),b[3](),{...b[4]({async:!0,highlight:async(h,g)=>{if(g==="mermaid"){Tt||(Tt=await d(),Tt.initialize({startOnLoad:!1}));const{svg:c}=await Tt.render(`mermaid-svg-${pe++}`,h);return c}return g==="math"?`<pre class="math">${await _(h,!0)}</pre>`:(Ct||(Ct=await o()),Ct.getLanguage(g)?Ct.highlight(h,{language:g}).value:Ct.highlightAuto(h).value)}}),renderer:{code:({text:h,lang:g})=>g==="mermaid"?`<div class="mermaid">${h}</div>`:g==="math"?h:`<pre><code class="hljs${g?` language-${g}`:""}">${h}
</code></pre>`}},{...ce(k),walkTokens:async h=>{const g=["inlineKatex","blockKatex"];g.includes(h.type)&&(h.text=await _(h.text,h.displayMode)+(h.type===g[1]?`
`:""))}})}async parse({text:e,baseUrl:t}){return this.marked.use(this.setBaseUrl(t||"")),this.marked.parse(e)}}new URL(import.meta.url).searchParams.has("register")&&customElements.define("zero-md",Kt);class me{constructor(e){this.manualViewModel=e,this.notificationCenter=this.manualViewModel.notificationCenter,this.notificationCenter.subscribe("openManual",this.openManual.bind(this)),this.notificationCenter.subscribe("key",this.handleKeyInput.bind(this)),this.manualContainer=document.getElementById("manual-container"),this.visible=!1,this.closeManualButton=document.createElement("input"),this.closeManualButton.id="close-manual-button",this.closeManualButton.type="button",this.closeManualButton.classList.add("normal-button"),this.closeManualButton.value="Close manual",this.closeManualButton.addEventListener("click",()=>{this.visible=!1,this.render()}),this.manualContainer.prepend(this.closeManualButton),customElements.define("zero-md",class extends Kt{async load(){await super.load(),this.template=Zt.preset("dark")}})}render(){if(this.visible==!1){this.manualContainer.classList.contains("hidden")||this.manualContainer.classList.add("hidden");return}this.manualContainer.classList.contains("hidden")&&this.manualContainer.classList.remove("hidden")}openManual(){this.visible=!0,this.render()}handleKeyInput(e){if(e.target!="manualScreen")return;const t=e.key;e.shift&&t.toLowerCase()=="m"&&this.closeManualButton.click()}}class ge{constructor(e){this.keyboardViewModel=e,this.notificationCenter=this.keyboardViewModel.notificationCenter,document.addEventListener("keydown",this.handleKeyboardInput.bind(this))}handleKeyboardInput(e){const t=document.getElementById("snapshots-container"),l=document.getElementById("settings-container"),s=document.getElementById("manual-container");l.classList.contains("hidden")?s.classList.contains("hidden")?document.getElementById("tier-editor-overlay")!=null?this.handleTierEditorInput(e):t.classList.contains("hidden")?this.handleMainScreenInput(e):this.handleSnapshotInput(e):this.handleManualScreenInput():this.handleSettingsScreenInput()}handleManualScreenInput(){this.notificationCenter.publish("key",{key:event.key,shift:event.shiftKey,target:"manualScreen"})}handleSettingsScreenInput(){this.notificationCenter.publish("key",{key:event.key,shift:event.shiftKey,target:"settingsScreen"})}handleTierEditorInput(e){this.notificationCenter.publish("key",{key:e.key,shift:e.shiftKey,target:"tierEditorOverlay"})}handleMainScreenInput(e){const t=document.activeElement;let l="";t==document.getElementById("tierlist-name")?l="tierlistName":l="mainScreen",this.notificationCenter.publish("key",{key:e.key,shift:e.shiftKey,target:l})}handleSnapshotInput(e){this.notificationCenter.publish("key",{key:e.key,shift:e.shiftKey,target:"snapshotsContainer"})}}class ve{constructor(e){this.visible=!1,this.snapshotsViewModel=e,this.notificationCenter=this.snapshotsViewModel.notificationCenter,this.notificationCenter.subscribe("toggleSnapshots",this.toggleSnapshots.bind(this)),this.notificationCenter.subscribe("key",this.processKeyInput.bind(this)),this.snapshotsContainer=document.getElementById("snapshots-container"),this.searchQuery=""}render(){if(this.snapshotsContainer.innerHTML="",this.visible==!1){this.snapshotsContainer.classList.add("hidden");return}this.snapshotsContainer.classList.contains("hidden")&&this.snapshotsContainer.classList.remove("hidden");const e=this.createSnapshotUtils();this.snapshotsContainer.appendChild(e);const t=document.getElementById("snapshot-search-bar");t.value=this.searchQuery,t.value!=""&&t.focus();const l=this.searchQuery.trim().toLowerCase(),s=this.snapshotsViewModel.getSnapshots();for(let n=0;n<s.length;n++)if(s[n].name.toLowerCase().includes(l)){const a=this.createSnapshotContainer(s[n],n);this.snapshotsContainer.appendChild(a)}}createSnapshotContainer(e,t){const l=document.createElement("div");l.classList.add("snapshot-container"),l.addEventListener("click",this.loadSnapshot.bind(this,t));const s=document.createElement("input");s.type="text",s.classList="snapshot-name",s.value=e.name,s.addEventListener("input",()=>{this.changeSnapshotName(t,event.target.value)}),s.addEventListener("click",()=>{event.stopPropagation()}),l.appendChild(s);const n=document.createElement("div");n.classList.add("snapshot-tierlist");for(let o=0;o<e.tiers.length;o++){const d=this.createSnapshotTier(e.tiers[o]);n.appendChild(d)}l.appendChild(n);const a=document.createElement("img");return a.src="./assets/img/trash.png",a.classList="snapshot-removal-element",a.addEventListener("click",o=>{o.stopPropagation(),this.removeSnapshot(t)}),l.appendChild(a),l}createSnapshotTier(e){const t=document.createElement("div");t.classList.add("snapshot-tier-container");const l=document.createElement("div");l.classList.add("snapshot-tier-name"),l.style.backgroundColor=e.color,l.innerText=e.name,t.appendChild(l);const s=document.createElement("div");s.classList.add("snapshot-tier-champions");for(let n=0;n<e.champions.length;n++){const a=this.createSnapshotChampionIcon(e.champions[n]);s.appendChild(a)}return t.appendChild(s),t}createSnapshotChampionIcon(e){const t=document.createElement("div");t.classList.add("snapshot-champion-icon-container");const l=document.createElement("img");return l.src="./assets/img/champion_icons/"+St(e)+".webp",t.appendChild(l),t}toggleSnapshots(){this.visible=!this.visible,this.snapshotsViewModel.toggleSnapshots();const e=document.getElementById("toggle-snapshots-button");this.visible?e.value="Hide snapshots":e.value="Show snapshots"}loadSnapshot(e){this.snapshotsViewModel.loadSnapshot(e)}processKeyInput(e){if(e.target=="snapshotsContainer"&&!document.activeElement.classList.contains("snapshot-name")){if(e.key=="Enter"&&this.snapshotsContainer.children[1]!=null){this.snapshotsContainer.children[1].click(),document.getElementById("snapshot-search-bar").blur();return}if(document.activeElement.id!="snapshot-search-bar")if(e.shift)e.key.toLowerCase()=="g"&&this.notificationCenter.publish("clickSnapshotsToggle");else{const t=/^[A-Za-z]$/;e.key.match(t)&&document.getElementById("snapshot-search-bar").focus()}}}changeSnapshotName(e,t){this.snapshotsViewModel.changeSnapshotName(e,t)}removeSnapshot(e){this.snapshotsViewModel.removeSnapshot(e),this.render()}createSnapshotUtils(){const e=document.createElement("div");e.classList.add("snapshot-utils");const t=document.createElement("input");t.type="button",t.value="Close",t.classList.add("normal-button"),t.addEventListener("click",this.toggleSnapshots.bind(this)),e.appendChild(t);const l=document.createElement("input");l.type="button",l.value="Clear all",l.classList.add("normal-button"),l.addEventListener("click",this.clearAllSnapshots.bind(this)),e.appendChild(l);const s=document.createElement("input");s.type="text",s.placeholder="Search by name...",s.id="snapshot-search-bar",s.addEventListener("input",this.searchSnapshots.bind(this)),e.appendChild(s);const n=document.createElement("input");n.type="button",n.value="Export",n.classList.add("normal-button"),n.addEventListener("click",this.exportSnapshots.bind(this)),e.appendChild(n);const a=document.createElement("input");a.type="file",a.classList="hidden",a.addEventListener("input",this.importSnapshots.bind(this)),e.appendChild(a);const o=document.createElement("input");o.type="button",o.value="Import",o.classList.add("normal-button"),o.addEventListener("click",()=>{a.click()}),e.appendChild(o);const d=document.createElement("input");return d.type="button",d.classList.add("normal-button"),d.value="Export images",d.addEventListener("click",this.exportSnapshotsAsImages.bind(this)),e.appendChild(d),e}clearAllSnapshots(){confirm("Clear all snapshots?")!=!1&&(this.snapshotsViewModel.clearAllSnapshots(),this.render())}searchSnapshots(){this.searchQuery=event.target.value,this.render()}async exportSnapshots(){const e=this.snapshotsViewModel.getSnapshots();Rt(e,"UTM_Snapshots.json")}async importSnapshots(){const e=await Wt(event.target.files[0]),t=JSON.parse(e);this.snapshotsViewModel.importSnapshots(t),this.render()}exportSnapshotsAsImages(){this.snapshotsViewModel.exportSnapshotsAsImages()}}class we{constructor(e){this.appViewModel=e,this.notificationCenter=this.appViewModel.notificationCenter,this.notificationCenter.subscribe("refreshAppView",this.render.bind(this)),this.appContainer=document.getElementById("root"),this.mainScreenView=new re(this.appViewModel.mainScreenViewModel),this.settingsView=new se(this.appViewModel.settingsViewModel),this.manualView=new me(this.appViewModel.manualViewModel),this.keyboardView=new ge(this.appViewModel.keyboardViewModel),this.snapshotsView=new ve(this.appViewModel.snapshotsViewModel)}render(){this.mainScreenView.render(),this.settingsView.render(),this.manualView.render(),this.snapshotsView.render()}}class Lt{constructor(e){this.name=e,this.champions=[],this.color="tomato"}addChampion(e){this.removeChampion(e),this.champions.push(e)}addChampionAtIndex(e,t){this.removeChampion(e),this.champions.splice(t,0,e)}removeChampion(e){const t=this.champions.findIndex(l=>l==e);t!=-1&&this.champions.splice(t,1)}setName(e){this.name=e}setColor(e){this.color=e}getTier(){return{name:this.name,champions:this.champions,color:this.color}}clearTier(){this.champions=[]}}class be{constructor(e,t,l){this.tierModel=e,this.notificationCenter=t,this.settingsViewModel=l}addChampion(e){this.tierModel.addChampion(e)}addChampionAtIndex(e,t){this.tierModel.addChampionAtIndex(e,t)}removeChampion(e){this.tierModel.removeChampion(e)}setName(e){this.tierModel.setName(e)}setColor(e){this.tierModel.setColor(e)}getTier(){return this.tierModel.getTier()}clearTier(){this.tierModel.clearTier()}getChampionIconPadding(){return this.settingsViewModel.getSettings().championIconPadding}getNameOnHoverSetting(){return this.settingsViewModel.getSettings().championNamesDisplayOnHoverInTheTierlist}}var vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(W){return W&&W.__esModule&&Object.prototype.hasOwnProperty.call(W,"default")?W.default:W}var zt={exports:{}},Ft;function ye(){return Ft||(Ft=1,function(W){(function(e){var t=C(),l=A(),s=T(),n=U(),a={imagePlaceholder:void 0,cacheBust:!1},o={toSvg:d,toPng:k,toJpeg:b,toBlob:_,toPixelData:m,impl:{fontFaces:s,images:n,util:t,inliner:l,options:{}}};W.exports=o;function d(E,z){return z=z||{},h(z),Promise.resolve(E).then(function(R){return c(R,z.filter,!0)}).then(p).then(u).then(x).then(function(R){return y(R,z.width||t.width(E),z.height||t.height(E))});function x(R){return z.bgcolor&&(R.style.backgroundColor=z.bgcolor),z.width&&(R.style.width=z.width+"px"),z.height&&(R.style.height=z.height+"px"),z.style&&Object.keys(z.style).forEach(function(G){R.style[G]=z.style[G]}),R}}function m(E,z){return g(E,z||{}).then(function(x){return x.getContext("2d").getImageData(0,0,t.width(E),t.height(E)).data})}function k(E,z){return g(E,z||{}).then(function(x){return x.toDataURL()})}function b(E,z){return z=z||{},g(E,z).then(function(x){return x.toDataURL("image/jpeg",z.quality||1)})}function _(E,z){return g(E,z||{}).then(t.canvasToBlob)}function h(E){typeof E.imagePlaceholder>"u"?o.impl.options.imagePlaceholder=a.imagePlaceholder:o.impl.options.imagePlaceholder=E.imagePlaceholder,typeof E.cacheBust>"u"?o.impl.options.cacheBust=a.cacheBust:o.impl.options.cacheBust=E.cacheBust}function g(E,z){return d(E,z).then(t.makeImage).then(t.delay(100)).then(function(R){var G=x(E);return G.getContext("2d").drawImage(R,0,0),G});function x(R){var G=document.createElement("canvas");if(G.width=z.width||t.width(R),G.height=z.height||t.height(R),z.bgcolor){var w=G.getContext("2d");w.fillStyle=z.bgcolor,w.fillRect(0,0,G.width,G.height)}return G}}function c(E,z,x){if(!x&&z&&!z(E))return Promise.resolve();return Promise.resolve(E).then(R).then(function(I){return G(E,I,z)}).then(function(I){return w(E,I)});function R(I){return I instanceof HTMLCanvasElement?t.makeImage(I.toDataURL()):I.cloneNode(!1)}function G(I,r,D){var tt=I.childNodes;if(tt.length===0)return Promise.resolve(r);return V(r,t.asArray(tt),D).then(function(){return r});function V(it,j,X){var L=Promise.resolve();return j.forEach(function(B){L=L.then(function(){return c(B,X)}).then(function(Y){Y&&it.appendChild(Y)})}),L}}function w(I,r){if(!(r instanceof Element))return r;return Promise.resolve().then(D).then(tt).then(V).then(it).then(function(){return r});function D(){j(window.getComputedStyle(I),r.style);function j(X,L){X.cssText?L.cssText=X.cssText:B(X,L);function B(Y,q){t.asArray(Y).forEach(function(P){q.setProperty(P,Y.getPropertyValue(P),Y.getPropertyPriority(P))})}}}function tt(){[":before",":after"].forEach(function(X){j(X)});function j(X){var L=window.getComputedStyle(I,X),B=L.getPropertyValue("content");if(B===""||B==="none")return;var Y=t.uid();r.className=r.className+" "+Y;var q=document.createElement("style");q.appendChild(P(Y,X,L)),r.appendChild(q);function P(Q,rt,J){var nt="."+Q+":"+rt,at=J.cssText?lt(J):ut(J);return document.createTextNode(nt+"{"+at+"}");function lt(ht){var i=ht.getPropertyValue("content");return ht.cssText+" content: "+i+";"}function ut(ht){return t.asArray(ht).map(i).join("; ")+";";function i(N){return N+": "+ht.getPropertyValue(N)+(ht.getPropertyPriority(N)?" !important":"")}}}}}function V(){I instanceof HTMLTextAreaElement&&(r.innerHTML=I.value),I instanceof HTMLInputElement&&r.setAttribute("value",I.value)}function it(){r instanceof SVGElement&&(r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r instanceof SVGRectElement&&["width","height"].forEach(function(j){var X=r.getAttribute(j);X&&r.style.setProperty(j,X)}))}}}function p(E){return s.resolveAll().then(function(z){var x=document.createElement("style");return E.appendChild(x),x.appendChild(document.createTextNode(z)),E})}function u(E){return n.inlineAll(E).then(function(){return E})}function y(E,z,x){return Promise.resolve(E).then(function(R){return R.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(R)}).then(t.escapeXhtml).then(function(R){return'<foreignObject x="0" y="0" width="100%" height="100%">'+R+"</foreignObject>"}).then(function(R){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+z+'" height="'+x+'">'+R+"</svg>"}).then(function(R){return"data:image/svg+xml;charset=utf-8,"+R})}function C(){return{escape:it,parseExtension:z,mimeType:x,dataAsUrl:V,isDataUrl:R,canvasToBlob:w,resolveUrl:I,getAndEncode:tt,uid:r(),delay:j,asArray:X,escapeXhtml:L,makeImage:D,width:B,height:Y};function E(){var P="application/font-woff",Q="image/jpeg";return{woff:P,woff2:P,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Q,jpeg:Q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function z(P){var Q=/\.([^\.\/]*?)$/g.exec(P);return Q?Q[1]:""}function x(P){var Q=z(P).toLowerCase();return E()[Q]||""}function R(P){return P.search(/^(data:)/)!==-1}function G(P){return new Promise(function(Q){for(var rt=window.atob(P.toDataURL().split(",")[1]),J=rt.length,nt=new Uint8Array(J),at=0;at<J;at++)nt[at]=rt.charCodeAt(at);Q(new Blob([nt],{type:"image/png"}))})}function w(P){return P.toBlob?new Promise(function(Q){P.toBlob(Q)}):G(P)}function I(P,Q){var rt=document.implementation.createHTMLDocument(),J=rt.createElement("base");rt.head.appendChild(J);var nt=rt.createElement("a");return rt.body.appendChild(nt),J.href=Q,nt.href=P,nt.href}function r(){var P=0;return function(){return"u"+Q()+P++;function Q(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function D(P){return new Promise(function(Q,rt){var J=new Image;J.onload=function(){Q(J)},J.onerror=rt,J.src=P})}function tt(P){var Q=3e4;return o.impl.options.cacheBust&&(P+=(/\?/.test(P)?"&":"?")+new Date().getTime()),new Promise(function(rt){var J=new XMLHttpRequest;J.onreadystatechange=lt,J.ontimeout=ut,J.responseType="blob",J.timeout=Q,J.open("GET",P,!0),J.send();var nt;if(o.impl.options.imagePlaceholder){var at=o.impl.options.imagePlaceholder.split(/,/);at&&at[1]&&(nt=at[1])}function lt(){if(J.readyState===4){if(J.status!==200){nt?rt(nt):ht("cannot fetch resource: "+P+", status: "+J.status);return}var i=new FileReader;i.onloadend=function(){var N=i.result.split(/,/)[1];rt(N)},i.readAsDataURL(J.response)}}function ut(){nt?rt(nt):ht("timeout of "+Q+"ms occured while fetching resource: "+P)}function ht(i){console.error(i),rt("")}})}function V(P,Q){return"data:"+Q+";base64,"+P}function it(P){return P.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function j(P){return function(Q){return new Promise(function(rt){setTimeout(function(){rt(Q)},P)})}}function X(P){for(var Q=[],rt=P.length,J=0;J<rt;J++)Q.push(P[J]);return Q}function L(P){return P.replace(/#/g,"%23").replace(/\n/g,"%0A")}function B(P){var Q=q(P,"border-left-width"),rt=q(P,"border-right-width");return P.scrollWidth+Q+rt}function Y(P){var Q=q(P,"border-top-width"),rt=q(P,"border-bottom-width");return P.scrollHeight+Q+rt}function q(P,Q){var rt=window.getComputedStyle(P).getPropertyValue(Q);return parseFloat(rt.replace("px",""))}}function A(){var E=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:G,shouldProcess:z,impl:{readUrls:x,inline:R}};function z(w){return w.search(E)!==-1}function x(w){for(var I=[],r;(r=E.exec(w))!==null;)I.push(r[1]);return I.filter(function(D){return!t.isDataUrl(D)})}function R(w,I,r,D){return Promise.resolve(I).then(function(V){return r?t.resolveUrl(V,r):V}).then(D||t.getAndEncode).then(function(V){return t.dataAsUrl(V,t.mimeType(I))}).then(function(V){return w.replace(tt(I),"$1"+V+"$3")});function tt(V){return new RegExp(`(url\\(['"]?)(`+t.escape(V)+`)(['"]?\\))`,"g")}}function G(w,I,r){if(D())return Promise.resolve(w);return Promise.resolve(w).then(x).then(function(tt){var V=Promise.resolve(w);return tt.forEach(function(it){V=V.then(function(j){return R(j,it,I,r)})}),V});function D(){return!z(w)}}}function T(){return{resolveAll:E,impl:{readAll:z}};function E(){return z().then(function(x){return Promise.all(x.map(function(R){return R.resolve()}))}).then(function(x){return x.join(`
`)})}function z(){return Promise.resolve(t.asArray(document.styleSheets)).then(R).then(x).then(function(w){return w.map(G)});function x(w){return w.filter(function(I){return I.type===CSSRule.FONT_FACE_RULE}).filter(function(I){return l.shouldProcess(I.style.getPropertyValue("src"))})}function R(w){var I=[];return w.forEach(function(r){try{t.asArray(r.cssRules||[]).forEach(I.push.bind(I))}catch(D){console.log("Error while reading CSS rules from "+r.href,D.toString())}}),I}function G(w){return{resolve:function(){var r=(w.parentStyleSheet||{}).href;return l.inlineAll(w.cssText,r)},src:function(){return w.style.getPropertyValue("src")}}}}}function U(){return{inlineAll:z,impl:{newImage:E}};function E(x){return{inline:R};function R(G){return t.isDataUrl(x.src)?Promise.resolve():Promise.resolve(x.src).then(G||t.getAndEncode).then(function(w){return t.dataAsUrl(w,t.mimeType(x.src))}).then(function(w){return new Promise(function(I,r){x.onload=I,x.onerror=r,x.src=w})})}}function z(x){if(!(x instanceof Element))return Promise.resolve(x);return R(x).then(function(){return x instanceof HTMLImageElement?E(x).inline():Promise.all(t.asArray(x.childNodes).map(function(G){return z(G)}))});function R(G){var w=G.style.getPropertyValue("background");return w?l.inlineAll(w).then(function(I){G.style.setProperty("background",I,G.style.getPropertyPriority("background"))}).then(function(){return G}):Promise.resolve(G)}}}})()}(zt)),zt.exports}var _e=ye();const qt=Gt(_e);class ke{constructor(e,t,l){this.tierlistModel=t,this.settingsViewModel=l,this.notificationCenter=e,this.notificationCenter.subscribe("pickChampion",this.pickChampion.bind(this)),this.notificationCenter.subscribe("clearTierlist",this.clearTierlist.bind(this)),this.notificationCenter.subscribe("exportTierlist",this.exportTierlist.bind(this)),this.notificationCenter.subscribe("importTierlist",this.importTierlist.bind(this)),this.notificationCenter.subscribe("usePoolTemplate",this.usePoolTemplate.bind(this)),this.notificationCenter.subscribe("exportPoolTemplate",this.exportPoolTemplate.bind(this)),this.notificationCenter.subscribe("key",this.handleKeyboardInput.bind(this)),this.notificationCenter.subscribe("exportPng",this.exportTierlistAsPng.bind(this)),this.notificationCenter.subscribe("loadSnapshot",this.loadSnapshot.bind(this)),this.tierViewModels=null,this.name="",this.loadTiers()}loadTiers(){const e=[],t=this.tierlistModel.getSavedTierlist(),l=t.tiers,s=t.name;for(let n=0;n<l.length;n++){const a=new Lt(l[n].name);a.champions=l[n].champions,a.color=l[n].color;const o=this.createTierViewModel(a);e.push(o)}this.tierViewModels=e,this.name=s}saveTierlist(){const e=[];for(let t=0;t<this.tierViewModels.length;t++){const l=this.tierViewModels[t].getTier();e.push(l)}this.tierlistModel.saveTierlist(e,this.name)}pickChampion(e){const t=e.champion,l=parseInt(e.key)-1;l<0||this.tierViewModels.length<=l||(this.addChampion(t,l),this.notificationCenter.publish("refreshTierlist",{}),this.saveTierlist())}addChampion(e,t){this.tierViewModels[t].removeChampion(e),this.tierViewModels[t].addChampion(e),this.saveTierlist()}addChampionAtIndex(e,t,l){this.tierViewModels[e].removeChampion(l),this.tierViewModels[e].addChampionAtIndex(l,t),this.saveTierlist()}addTier(){let e="Z";if(this.tierViewModels.length==0)e="S";else if(this.tierViewModels.length==1)e="A";else{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=this.tierViewModels[this.tierViewModels.length-1].getTier().name;for(let o=0;o<s.length-1;o++)a.toUpperCase()==s[o]&&(e=s[o+1])}const t=new Lt(e),l=this.createTierViewModel(t);this.tierViewModels.push(l),this.saveTierlist()}getTiers(){const e=[];for(let t=0;t<this.tierViewModels.length;t++){const l=this.tierViewModels[t].getTier();e.push(l)}return e}removeTier(e){this.tierViewModels.splice(e,1),this.saveTierlist()}removeChampion(e,t){this.tierViewModels[e].removeChampion(t),this.saveTierlist()}removeDummies(){for(let e=0;e<this.tierViewModels.length;e++)this.tierViewModels[e].removeChampion("dummy");this.saveTierlist()}changeTierName(e,t){this.tierViewModels[e].setName(t),this.saveTierlist()}changeTierColor(e,t){this.tierViewModels[e].setColor(t),this.saveTierlist()}swapTierUp(e){if(e==0)return;const t=this.tierViewModels[e];this.tierViewModels[e]=this.tierViewModels[e-1],this.tierViewModels[e-1]=t,this.saveTierlist()}swapTierDown(e){if(e==this.tierViewModels.length-1)return;const t=this.tierViewModels[e];this.tierViewModels[e]=this.tierViewModels[e+1],this.tierViewModels[e+1]=t,this.saveTierlist()}clearTierlist(){this.tierlistModel.clearTierlist(),this.loadTiers(),this.saveTierlist(this.tierViewModels),this.notificationCenter.publish("refreshTierlist")}exportTierlist(){const e=this.tierlistModel.getSavedTierlist();Rt(e,"tierlist.json")}async importTierlist(e){const t=await Wt(e.file);try{const l=JSON.parse(t);this.tierlistModel.saveTierlist(l.tiers,l.name),this.loadTiers(),this.notificationCenter.publish("refreshTierlist")}catch(l){console.log(l)}}usePoolTemplate(){const e=[],t=this.tierlistModel.loadPoolTemplate();for(let l=0;l<t.length;l++){const s=new Lt(t[l].name);s.champions=t[l].champions,s.color=t[l].color;const n=this.createTierViewModel(s);e.push(n)}this.tierViewModels=e,this.saveTierlist(),this.notificationCenter.publish("refreshTierlist")}exportPoolTemplate(){const e=this.getTiers(),t={top:e[0].champions,jungle:e[1].champions,mid:e[2].champions,adc:e[3].champions,support:e[4].champions};Rt(t,"team_pool.json")}handleKeyboardInput(e){const t=e.key,l=e.target;t=="Delete"&&l=="mainScreen"&&this.clearTierlist()}exportTierlistAsPng(){const e=document.getElementById("tierlist"),t=e.getBoundingClientRect();qt.toPng(e,{filter:function(l){return l.classList==null?!0:!(l.classList.contains("tier-swapping-container")||l.classList.contains("tierlist-addition-element"))},height:parseInt(t.height)-80,width:parseInt(t.width)}).then(function(l){Yt(l,"tierlist.png")})}loadSnapshot(e){const t=e.snapshot;this.tierlistModel.saveTierlist(t.tiers,t.name),this.name=t.name,this.loadTiers(),this.notificationCenter.publish("refreshTierlist")}changeTierlistName(e){this.name=e,this.saveTierlist()}createTierViewModel(e){return new be(e,this.notificationCenter,this.settingsViewModel)}}const Ot=["aatrox","ahri","akali","akshan","alistar","ambessa","amumu","anivia","annie","aphelios","ashe","aurelionsol","aurora","azir","bard","belveth","blitzcrank","brand","braum","briar","caitlyn","camille","cassiopeia","chogath","corki","darius","diana","draven","drmundo","ekko","elise","evelynn","ezreal","fiddlesticks","fiora","fizz","galio","gangplank","garen","gnar","gragas","graves","gwen","hecarim","heimerdinger","hwei","illaoi","irelia","ivern","janna","jarvan","jax","jayce","jhin","jinx","kaisa","kalista","karma","karthus","kassadin","katarina","kayle","kayn","kennen","khazix","kindred","kled","kogmaw","ksante","leblanc","leesin","leona","lillia","lissandra","lucian","lulu","lux","malphite","malzahar","maokai","masteryi","mel","milio","missfortune","mordekaiser","morgana","naafiri","nami","nasus","nautilus","neeko","nidalee","nilah","nocturne","nunu","olaf","orianna","ornn","pantheon","poppy","pyke","qiyana","quinn","rakan","rammus","reksai","rell","renata","renekton","rengar","riven","rumble","ryze","samira","sejuani","senna","seraphine","sett","shaco","shen","shyvana","singed","sion","sivir","skarner","smolder","sona","soraka","swain","sylas","syndra","tahmkench","taliyah","talon","taric","teemo","thresh","tristana","trundle","tryndamere","twistedfate","twitch","udyr","urgot","varus","vayne","veigar","velkoz","vex","vi","viego","viktor","vladimir","volibear","warwick","wukong","xayah","xerath","xinzhao","yasuo","yone","yorick","yunara","yuumi","zac","zed","zeri","ziggs","zilean","zoe","zyra"];class Ce{constructor(){this.champions=Ot}addChampion(e){this.champions.push(e)}removeChampion(e){this.champions.splice(e,1)}getChampions(){return this.champions}searchChampions(e){if(e==""){this.champions=Ot;return}let t=Ot;const l=[];t=t.sort();for(let n=0;n<t.length;n++)t[n]==e&&l.push(t[n]);for(let n=0;n<t.length;n++)t[n].includes(e)&&!l.includes(t[n])&&l.push(t[n]);let s=0;for(let n=0;n<t.length;n++){s=0;for(let a=0;a<t[n].length;a++)if(e[s]===t[n][a]&&(s+=1),s===e.length&&!l.includes(t[n])){l.push(t[n]);break}}this.champions=l}}class Se{constructor(e,t,l){this.notificationCenter=t,this.settingsViewModel=l,this.model=e,this.champions=[],this.notificationCenter.subscribe("key",this.handleKeyboardInput.bind(this))}addChampion(){this.model.addChampion()}getChampions(){return this.champions=this.model.getChampions(),this.champions}searchChampions(e){return this.model.searchChampions(e)}handleKeyboardInput(e){if(e.target!="mainScreen")return;const t=e.key,l=/[0-9]/;t.match(l)&&t.length==1&&this.champions.length!=0&&this.notificationCenter.publish("pickChampion",{champion:this.champions[0],key:t})}getNameOnHoverSetting(){return this.settingsViewModel.getSettings().championNamesDisplayOnHoverInTheChampionSelection}}const wt={snapshotsSaveLocation:"UTM_Snapshots",tierlistSaveLocation:"UTM_Tierlist",settingsSaveLocation:"UTM_Settings"};class xe{constructor(){}getSavedTierlist(){const e={name:"My tierlist",tiers:[{name:"S",champions:[],color:"deepskyblue"},{name:"A",champions:[],color:"limegreen"},{name:"B",champions:[],color:"yellow"},{name:"C",champions:[],color:"orange"},{name:"F",champions:[],color:"tomato"}]},t=localStorage.getItem(wt.tierlistSaveLocation);return t==null?e:JSON.parse(t)}saveTierlist(e,t){const l={name:t,tiers:e};localStorage.setItem(wt.tierlistSaveLocation,JSON.stringify(l))}clearTierlist(){localStorage.removeItem(wt.tierlistSaveLocation)}loadPoolTemplate(){return[{name:"Top",champions:[],color:"deepskyblue"},{name:"Jungle",champions:[],color:"limegreen"},{name:"Mid",champions:[],color:"yellow"},{name:"Bottom",champions:[],color:"orange"},{name:"Support",champions:[],color:"tomato"}]}}class Ee{constructor(){}}class Te{constructor(e,t){this.utilsModel=e,this.notificationCenter=t}clearTierlist(){this.notificationCenter.publish("clearTierlist",{})}exportTierlist(){this.notificationCenter.publish("exportTierlist",{})}importTierlist(e){this.notificationCenter.publish("importTierlist",{file:e.target.files[0]})}usePoolTemplate(){this.notificationCenter.publish("usePoolTemplate")}exportPoolTemplate(){this.notificationCenter.publish("exportPoolTemplate")}exportPng(){this.notificationCenter.publish("exportPng")}toggleSnapshots(){this.notificationCenter.publish("toggleSnapshots")}saveSnapshot(){this.notificationCenter.publish("saveSnapshot")}}class Ie{constructor(e,t){this.notificationCenter=e,this.settingsViewModel=t;const l=new Ee;this.utilsViewModel=new Te(l,this.notificationCenter);const s=new xe;this.tierlistViewModel=new ke(this.notificationCenter,s,this.settingsViewModel);const n=new Ce;this.championSelectionViewModel=new Se(n,this.notificationCenter,this.settingsViewModel)}handleDrop(e){const t=JSON.parse(e.dataTransfer.getData("text/plain"));t.tier!=null&&this.tierlistViewModel.removeChampion(t.tier,t.champion)}}class Ae{constructor(e){this.notificationCenter=e}}class Be{constructor(){}saveSnapshot(){const e=JSON.parse(localStorage.getItem(wt.tierlistSaveLocation)),t=this.getSnapshots();t.push(e),this.saveSnapshots(t)}getSnapshots(){const e=localStorage.getItem(wt.snapshotsSaveLocation);return e==null?[]:JSON.parse(e)}changeSnapshotName(e,t){const l=this.getSnapshots();l[e].name=t,this.saveSnapshots(l)}removeSnapshot(e){const t=this.getSnapshots();t.splice(e,1),this.saveSnapshots(t)}clearAllSnapshots(){this.saveSnapshots([])}importSnapshots(e){const t=this.getSnapshots();for(let l=0;l<e.length;l++)t.push(e[l]);this.saveSnapshots(t)}saveSnapshots(e){localStorage.setItem(wt.snapshotsSaveLocation,JSON.stringify(e))}}var At={exports:{}},Me=At.exports,jt;function Le(){return jt||(jt=1,function(W,e){(function(t,l){l()})(Me,function(){function t(m,k){return typeof k>"u"?k={autoBom:!1}:typeof k!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),k={autoBom:!k}),k.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function l(m,k,b){var _=new XMLHttpRequest;_.open("GET",m),_.responseType="blob",_.onload=function(){d(_.response,k,b)},_.onerror=function(){console.error("could not download file")},_.send()}function s(m){var k=new XMLHttpRequest;k.open("HEAD",m,!1);try{k.send()}catch{}return 200<=k.status&&299>=k.status}function n(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(k)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof vt=="object"&&vt.global===vt?vt:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(m,k,b){var _=a.URL||a.webkitURL,h=document.createElement("a");k=k||m.name||"download",h.download=k,h.rel="noopener",typeof m=="string"?(h.href=m,h.origin===location.origin?n(h):s(h.href)?l(m,k,b):n(h,h.target="_blank")):(h.href=_.createObjectURL(m),setTimeout(function(){_.revokeObjectURL(h.href)},4e4),setTimeout(function(){n(h)},0))}:"msSaveOrOpenBlob"in navigator?function(m,k,b){if(k=k||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,b),k);else if(s(m))l(m,k,b);else{var _=document.createElement("a");_.href=m,_.target="_blank",setTimeout(function(){n(_)})}}:function(m,k,b,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof m=="string")return l(m,k,b);var h=m.type==="application/octet-stream",g=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||h&&g||o)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var C=p.result;C=c?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=C:location=C,_=null},p.readAsDataURL(m)}else{var u=a.URL||a.webkitURL,y=u.createObjectURL(m);_?_.location=y:location.href=y,_=null,setTimeout(function(){u.revokeObjectURL(y)},4e4)}});a.saveAs=d.saveAs=d,W.exports=d})}(At)),At.exports}var ze=Le();function It(W){throw new Error('Could not dynamically require "'+W+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ht;function Oe(){return Ht||(Ht=1,function(W,e){(function(t){W.exports=t()})(function(){return function t(l,s,n){function a(m,k){if(!s[m]){if(!l[m]){var b=typeof It=="function"&&It;if(!k&&b)return b(m,!0);if(o)return o(m,!0);var _=new Error("Cannot find module '"+m+"'");throw _.code="MODULE_NOT_FOUND",_}var h=s[m]={exports:{}};l[m][0].call(h.exports,function(g){var c=l[m][1][g];return a(c||g)},h,h.exports,t,l,s,n)}return s[m].exports}for(var o=typeof It=="function"&&It,d=0;d<n.length;d++)a(n[d]);return a}({1:[function(t,l,s){var n=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(d){for(var m,k,b,_,h,g,c,p=[],u=0,y=d.length,C=y,A=n.getTypeOf(d)!=="string";u<d.length;)C=y-u,b=A?(m=d[u++],k=u<y?d[u++]:0,u<y?d[u++]:0):(m=d.charCodeAt(u++),k=u<y?d.charCodeAt(u++):0,u<y?d.charCodeAt(u++):0),_=m>>2,h=(3&m)<<4|k>>4,g=1<C?(15&k)<<2|b>>6:64,c=2<C?63&b:64,p.push(o.charAt(_)+o.charAt(h)+o.charAt(g)+o.charAt(c));return p.join("")},s.decode=function(d){var m,k,b,_,h,g,c=0,p=0,u="data:";if(d.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var y,C=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===o.charAt(64)&&C--,d.charAt(d.length-2)===o.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|C):new Array(0|C);c<d.length;)m=o.indexOf(d.charAt(c++))<<2|(_=o.indexOf(d.charAt(c++)))>>4,k=(15&_)<<4|(h=o.indexOf(d.charAt(c++)))>>2,b=(3&h)<<6|(g=o.indexOf(d.charAt(c++))),y[p++]=m,h!==64&&(y[p++]=k),g!==64&&(y[p++]=b);return y}},{"./support":30,"./utils":32}],2:[function(t,l,s){var n=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),d=t("./stream/DataLengthProbe");function m(k,b,_,h,g){this.compressedSize=k,this.uncompressedSize=b,this.crc32=_,this.compression=h,this.compressedContent=g}m.prototype={getContentWorker:function(){var k=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),b=this;return k.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(k,b,_){return k.pipe(new o).pipe(new d("uncompressedSize")).pipe(b.compressWorker(_)).pipe(new d("compressedSize")).withStreamInfo("compression",b)},l.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,l,s){var n=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,l,s){var n=t("./utils"),a=function(){for(var o,d=[],m=0;m<256;m++){o=m;for(var k=0;k<8;k++)o=1&o?3988292384^o>>>1:o>>>1;d[m]=o}return d}();l.exports=function(o,d){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?function(m,k,b,_){var h=a,g=_+b;m^=-1;for(var c=_;c<g;c++)m=m>>>8^h[255&(m^k[c])];return-1^m}(0|d,o,o.length,0):function(m,k,b,_){var h=a,g=_+b;m^=-1;for(var c=_;c<g;c++)m=m>>>8^h[255&(m^k.charCodeAt(c))];return-1^m}(0|d,o,o.length,0):0}},{"./utils":32}],5:[function(t,l,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,l,s){var n=null;n=typeof Promise<"u"?Promise:t("lie"),l.exports={Promise:n}},{lie:37}],7:[function(t,l,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),d=t("./stream/GenericWorker"),m=n?"uint8array":"array";function k(b,_){d.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=_,this.meta={}}s.magic="\b\0",o.inherits(k,d),k.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(m,b.data),!1)},k.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(_){b.push({data:_,meta:b.meta})}},s.compressWorker=function(b){return new k("Deflate",b)},s.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,l,s){function n(h,g){var c,p="";for(c=0;c<g;c++)p+=String.fromCharCode(255&h),h>>>=8;return p}function a(h,g,c,p,u,y){var C,A,T=h.file,U=h.compression,E=y!==m.utf8encode,z=o.transformTo("string",y(T.name)),x=o.transformTo("string",m.utf8encode(T.name)),R=T.comment,G=o.transformTo("string",y(R)),w=o.transformTo("string",m.utf8encode(R)),I=x.length!==T.name.length,r=w.length!==R.length,D="",tt="",V="",it=T.dir,j=T.date,X={crc32:0,compressedSize:0,uncompressedSize:0};g&&!c||(X.crc32=h.crc32,X.compressedSize=h.compressedSize,X.uncompressedSize=h.uncompressedSize);var L=0;g&&(L|=8),E||!I&&!r||(L|=2048);var B=0,Y=0;it&&(B|=16),u==="UNIX"?(Y=798,B|=function(P,Q){var rt=P;return P||(rt=Q?16893:33204),(65535&rt)<<16}(T.unixPermissions,it)):(Y=20,B|=function(P){return 63&(P||0)}(T.dosPermissions)),C=j.getUTCHours(),C<<=6,C|=j.getUTCMinutes(),C<<=5,C|=j.getUTCSeconds()/2,A=j.getUTCFullYear()-1980,A<<=4,A|=j.getUTCMonth()+1,A<<=5,A|=j.getUTCDate(),I&&(tt=n(1,1)+n(k(z),4)+x,D+="up"+n(tt.length,2)+tt),r&&(V=n(1,1)+n(k(G),4)+w,D+="uc"+n(V.length,2)+V);var q="";return q+=`
\0`,q+=n(L,2),q+=U.magic,q+=n(C,2),q+=n(A,2),q+=n(X.crc32,4),q+=n(X.compressedSize,4),q+=n(X.uncompressedSize,4),q+=n(z.length,2),q+=n(D.length,2),{fileRecord:b.LOCAL_FILE_HEADER+q+z+D,dirRecord:b.CENTRAL_FILE_HEADER+n(Y,2)+q+n(G.length,2)+"\0\0\0\0"+n(B,4)+n(p,4)+z+D+G}}var o=t("../utils"),d=t("../stream/GenericWorker"),m=t("../utf8"),k=t("../crc32"),b=t("../signature");function _(h,g,c,p){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=c,this.encodeFileName=p,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(_,d),_.prototype.push=function(h){var g=h.meta.percent||0,c=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,d.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:c?(g+100*(c-p-1))/c:100}}))},_.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var g=this.streamFiles&&!h.file.dir;if(g){var c=a(h,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(h){this.accumulate=!1;var g=this.streamFiles&&!h.file.dir,c=a(h,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),g)this.push({data:function(p){return b.DATA_DESCRIPTOR+n(p.crc32,4)+n(p.compressedSize,4)+n(p.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var h=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var c=this.bytesWritten-h,p=function(u,y,C,A,T){var U=o.transformTo("string",T(A));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(u,2)+n(u,2)+n(y,4)+n(C,4)+n(U.length,2)+U}(this.dirRecords.length,c,h,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(h){this._sources.push(h);var g=this;return h.on("data",function(c){g.processChunk(c)}),h.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),h.on("error",function(c){g.error(c)}),this},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(h){var g=this._sources;if(!d.prototype.error.call(this,h))return!1;for(var c=0;c<g.length;c++)try{g[c].error(h)}catch{}return!0},_.prototype.lock=function(){d.prototype.lock.call(this);for(var h=this._sources,g=0;g<h.length;g++)h[g].lock()},l.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,l,s){var n=t("../compressions"),a=t("./ZipFileWorker");s.generateWorker=function(o,d,m){var k=new a(d.streamFiles,m,d.platform,d.encodeFileName),b=0;try{o.forEach(function(_,h){b++;var g=function(y,C){var A=y||C,T=n[A];if(!T)throw new Error(A+" is not a valid compression method !");return T}(h.options.compression,d.compression),c=h.options.compressionOptions||d.compressionOptions||{},p=h.dir,u=h.date;h._compressWorker(g,c).withStreamInfo("file",{name:_,dir:p,date:u,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(k)}),k.entriesCount=b}catch(_){k.error(_)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,l,s){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new n;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(a,o){return new n().loadAsync(a,o)},n.external=t("./external"),l.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,l,s){var n=t("./utils"),a=t("./external"),o=t("./utf8"),d=t("./zipEntries"),m=t("./stream/Crc32Probe"),k=t("./nodejsUtils");function b(_){return new a.Promise(function(h,g){var c=_.decompressed.getContentWorker().pipe(new m);c.on("error",function(p){g(p)}).on("end",function(){c.streamInfo.crc32!==_.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}l.exports=function(_,h){var g=this;return h=n.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),k.isNode&&k.isStream(_)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",_,!0,h.optimizedBinaryString,h.base64).then(function(c){var p=new d(h);return p.load(c),p}).then(function(c){var p=[a.Promise.resolve(c)],u=c.files;if(h.checkCRC32)for(var y=0;y<u.length;y++)p.push(b(u[y]));return a.Promise.all(p)}).then(function(c){for(var p=c.shift(),u=p.files,y=0;y<u.length;y++){var C=u[y],A=C.fileNameStr,T=n.resolve(C.fileNameStr);g.file(T,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:h.createFolders}),C.dir||(g.file(T).unsafeOriginalName=A)}return p.zipComment.length&&(g.comment=p.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,l,s){var n=t("../utils"),a=t("../stream/GenericWorker");function o(d,m){a.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(m)}n.inherits(o,a),o.prototype._bindStream=function(d){var m=this;(this._stream=d).pause(),d.on("data",function(k){m.push({data:k,meta:{percent:0}})}).on("error",function(k){m.isPaused?this.generatedError=k:m.error(k)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},l.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,l,s){var n=t("readable-stream").Readable;function a(o,d,m){n.call(this,d),this._helper=o;var k=this;o.on("data",function(b,_){k.push(b)||k._helper.pause(),m&&m(_)}).on("error",function(b){k.emit("error",b)}).on("end",function(){k.push(null)})}t("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},l.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,l,s){l.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,a);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,a)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var a=new Buffer(n);return a.fill(0),a},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,l,s){function n(T,U,E){var z,x=o.getTypeOf(U),R=o.extend(E||{},k);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(T=u(T)),R.createFolders&&(z=p(T))&&y.call(this,z,!0);var G=x==="string"&&R.binary===!1&&R.base64===!1;E&&E.binary!==void 0||(R.binary=!G),(U instanceof b&&U.uncompressedSize===0||R.dir||!U||U.length===0)&&(R.base64=!1,R.binary=!0,U="",R.compression="STORE",x="string");var w=null;w=U instanceof b||U instanceof d?U:g.isNode&&g.isStream(U)?new c(T,U):o.prepareContent(T,U,R.binary,R.optimizedBinaryString,R.base64);var I=new _(T,w,R);this.files[T]=I}var a=t("./utf8"),o=t("./utils"),d=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),k=t("./defaults"),b=t("./compressedObject"),_=t("./zipObject"),h=t("./generate"),g=t("./nodejsUtils"),c=t("./nodejs/NodejsStreamInputAdapter"),p=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var U=T.lastIndexOf("/");return 0<U?T.substring(0,U):""},u=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},y=function(T,U){return U=U!==void 0?U:k.createFolders,T=u(T),this.files[T]||n.call(this,T,null,{dir:!0,createFolders:U}),this.files[T]};function C(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var U,E,z;for(U in this.files)z=this.files[U],(E=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&T(E,z)},filter:function(T){var U=[];return this.forEach(function(E,z){T(E,z)&&U.push(z)}),U},file:function(T,U,E){if(arguments.length!==1)return T=this.root+T,n.call(this,T,U,E),this;if(C(T)){var z=T;return this.filter(function(R,G){return!G.dir&&z.test(R)})}var x=this.files[this.root+T];return x&&!x.dir?x:null},folder:function(T){if(!T)return this;if(C(T))return this.filter(function(x,R){return R.dir&&T.test(x)});var U=this.root+T,E=y.call(this,U),z=this.clone();return z.root=E.name,z},remove:function(T){T=this.root+T;var U=this.files[T];if(U||(T.slice(-1)!=="/"&&(T+="/"),U=this.files[T]),U&&!U.dir)delete this.files[T];else for(var E=this.filter(function(x,R){return R.name.slice(0,T.length)===T}),z=0;z<E.length;z++)delete this.files[E[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var U,E={};try{if((E=o.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");o.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var z=E.comment||this.comment||"";U=h.generateWorker(this,E,z)}catch(x){(U=new d("error")).error(x)}return new m(U,E.type||"string",E.mimeType)},generateAsync:function(T,U){return this.generateInternalStream(T).accumulate(U)},generateNodeStream:function(T,U){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(U)}};l.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,l,s){l.exports=t("stream")},{stream:void 0}],17:[function(t,l,s){var n=t("./DataReader");function a(o){n.call(this,o);for(var d=0;d<this.data.length;d++)o[d]=255&o[d]}t("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var d=o.charCodeAt(0),m=o.charCodeAt(1),k=o.charCodeAt(2),b=o.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===d&&this.data[_+1]===m&&this.data[_+2]===k&&this.data[_+3]===b)return _-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var d=o.charCodeAt(0),m=o.charCodeAt(1),k=o.charCodeAt(2),b=o.charCodeAt(3),_=this.readData(4);return d===_[0]&&m===_[1]&&k===_[2]&&b===_[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},l.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,l,s){var n=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var d,m=0;for(this.checkOffset(o),d=this.index+o-1;d>=this.index;d--)m=(m<<8)+this.byteAt(d);return this.index+=o,m},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},l.exports=a},{"../utils":32}],19:[function(t,l,s){var n=t("./Uint8ArrayReader");function a(o){n.call(this,o)}t("../utils").inherits(a,n),a.prototype.readData=function(o){this.checkOffset(o);var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},l.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,l,s){var n=t("./DataReader");function a(o){n.call(this,o)}t("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},l.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,l,s){var n=t("./ArrayReader");function a(o){n.call(this,o)}t("../utils").inherits(a,n),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},l.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,l,s){var n=t("../utils"),a=t("../support"),o=t("./ArrayReader"),d=t("./StringReader"),m=t("./NodeBufferReader"),k=t("./Uint8ArrayReader");l.exports=function(b){var _=n.getTypeOf(b);return n.checkSupport(_),_!=="string"||a.uint8array?_==="nodebuffer"?new m(b):a.uint8array?new k(n.transformTo("uint8array",b)):new o(n.transformTo("array",b)):new d(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,l,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,l,s){var n=t("./GenericWorker"),a=t("../utils");function o(d){n.call(this,"ConvertWorker to "+d),this.destType=d}a.inherits(o,n),o.prototype.processChunk=function(d){this.push({data:a.transformTo(this.destType,d.data),meta:d.meta})},l.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,l,s){var n=t("./GenericWorker"),a=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(d){this.streamInfo.crc32=a(d.data,this.streamInfo.crc32||0),this.push(d)},l.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,l,s){var n=t("../utils"),a=t("./GenericWorker");function o(d){a.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}n.inherits(o,a),o.prototype.processChunk=function(d){if(d){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+d.data.length}a.prototype.processChunk.call(this,d)},l.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,l,s){var n=t("../utils"),a=t("./GenericWorker");function o(d){a.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(k){m.dataIsReady=!0,m.data=k,m.max=k&&k.length||0,m.type=n.getTypeOf(k),m.isPaused||m._tickAndRepeat()},function(k){m.error(k)})}n.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,m);break;case"uint8array":d=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":d=this.data.slice(this.index,m)}return this.index=m,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},l.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,l,s){function n(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var d=0;d<this._listeners[a].length;d++)this._listeners[a][d].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(d){o.processChunk(d)}),a.on("end",function(){o.end()}),a.on("error",function(d){o.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},l.exports=n},{}],29:[function(t,l,s){var n=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),d=t("../base64"),m=t("../support"),k=t("../external"),b=null;if(m.nodestream)try{b=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(g,c){return new k.Promise(function(p,u){var y=[],C=g._internalType,A=g._outputType,T=g._mimeType;g.on("data",function(U,E){y.push(U),c&&c(E)}).on("error",function(U){y=[],u(U)}).on("end",function(){try{var U=function(E,z,x){switch(E){case"blob":return n.newBlob(n.transformTo("arraybuffer",z),x);case"base64":return d.encode(z);default:return n.transformTo(E,z)}}(A,function(E,z){var x,R=0,G=null,w=0;for(x=0;x<z.length;x++)w+=z[x].length;switch(E){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(G=new Uint8Array(w),x=0;x<z.length;x++)G.set(z[x],R),R+=z[x].length;return G;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+E+"'")}}(C,y),T);p(U)}catch(E){u(E)}y=[]}).resume()})}function h(g,c,p){var u=c;switch(c){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=c,this._mimeType=p,n.checkSupport(u),this._worker=g.pipe(new a(u)),g.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}h.prototype={accumulate:function(g){return _(this,g)},on:function(g,c){var p=this;return g==="data"?this._worker.on(g,function(u){c.call(p,u.data,u.meta)}):this._worker.on(g,function(){n.delay(c,arguments,p)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},g)}},l.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,l,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var n=new ArrayBuffer(0);try{s.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,l,s){for(var n=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),d=t("./stream/GenericWorker"),m=new Array(256),k=0;k<256;k++)m[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;m[254]=m[254]=1;function b(){d.call(this,"utf-8 decode"),this.leftOver=null}function _(){d.call(this,"utf-8 encode")}s.utf8encode=function(h){return a.nodebuffer?o.newBufferFrom(h,"utf-8"):function(g){var c,p,u,y,C,A=g.length,T=0;for(y=0;y<A;y++)(64512&(p=g.charCodeAt(y)))==55296&&y+1<A&&(64512&(u=g.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(u-56320),y++),T+=p<128?1:p<2048?2:p<65536?3:4;for(c=a.uint8array?new Uint8Array(T):new Array(T),y=C=0;C<T;y++)(64512&(p=g.charCodeAt(y)))==55296&&y+1<A&&(64512&(u=g.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(u-56320),y++),p<128?c[C++]=p:(p<2048?c[C++]=192|p>>>6:(p<65536?c[C++]=224|p>>>12:(c[C++]=240|p>>>18,c[C++]=128|p>>>12&63),c[C++]=128|p>>>6&63),c[C++]=128|63&p);return c}(h)},s.utf8decode=function(h){return a.nodebuffer?n.transformTo("nodebuffer",h).toString("utf-8"):function(g){var c,p,u,y,C=g.length,A=new Array(2*C);for(c=p=0;c<C;)if((u=g[c++])<128)A[p++]=u;else if(4<(y=m[u]))A[p++]=65533,c+=y-1;else{for(u&=y===2?31:y===3?15:7;1<y&&c<C;)u=u<<6|63&g[c++],y--;1<y?A[p++]=65533:u<65536?A[p++]=u:(u-=65536,A[p++]=55296|u>>10&1023,A[p++]=56320|1023&u)}return A.length!==p&&(A.subarray?A=A.subarray(0,p):A.length=p),n.applyFromCharCode(A)}(h=n.transformTo(a.uint8array?"uint8array":"array",h))},n.inherits(b,d),b.prototype.processChunk=function(h){var g=n.transformTo(a.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var c=g;(g=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),g.set(c,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var p=function(y,C){var A;for((C=C||y.length)>y.length&&(C=y.length),A=C-1;0<=A&&(192&y[A])==128;)A--;return A<0||A===0?C:A+m[y[A]]>C?A:C}(g),u=g;p!==g.length&&(a.uint8array?(u=g.subarray(0,p),this.leftOver=g.subarray(p,g.length)):(u=g.slice(0,p),this.leftOver=g.slice(p,g.length))),this.push({data:s.utf8decode(u),meta:h.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=b,n.inherits(_,d),_.prototype.processChunk=function(h){this.push({data:s.utf8encode(h.data),meta:h.meta})},s.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,l,s){var n=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),d=t("./external");function m(c){return c}function k(c,p){for(var u=0;u<c.length;++u)p[u]=255&c.charCodeAt(u);return p}t("setimmediate"),s.newBlob=function(c,p){s.checkSupport("blob");try{return new Blob([c],{type:p})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(c),u.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(c,p,u){var y=[],C=0,A=c.length;if(A<=u)return String.fromCharCode.apply(null,c);for(;C<A;)p==="array"||p==="nodebuffer"?y.push(String.fromCharCode.apply(null,c.slice(C,Math.min(C+u,A)))):y.push(String.fromCharCode.apply(null,c.subarray(C,Math.min(C+u,A)))),C+=u;return y.join("")},stringifyByChar:function(c){for(var p="",u=0;u<c.length;u++)p+=String.fromCharCode(c[u]);return p},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function _(c){var p=65536,u=s.getTypeOf(c),y=!0;if(u==="uint8array"?y=b.applyCanBeUsed.uint8array:u==="nodebuffer"&&(y=b.applyCanBeUsed.nodebuffer),y)for(;1<p;)try{return b.stringifyByChunk(c,u,p)}catch{p=Math.floor(p/2)}return b.stringifyByChar(c)}function h(c,p){for(var u=0;u<c.length;u++)p[u]=c[u];return p}s.applyFromCharCode=_;var g={};g.string={string:m,array:function(c){return k(c,new Array(c.length))},arraybuffer:function(c){return g.string.uint8array(c).buffer},uint8array:function(c){return k(c,new Uint8Array(c.length))},nodebuffer:function(c){return k(c,o.allocBuffer(c.length))}},g.array={string:_,array:m,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return o.newBufferFrom(c)}},g.arraybuffer={string:function(c){return _(new Uint8Array(c))},array:function(c){return h(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:m,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return o.newBufferFrom(new Uint8Array(c))}},g.uint8array={string:_,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:m,nodebuffer:function(c){return o.newBufferFrom(c)}},g.nodebuffer={string:_,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return g.nodebuffer.uint8array(c).buffer},uint8array:function(c){return h(c,new Uint8Array(c.length))},nodebuffer:m},s.transformTo=function(c,p){if(p=p||"",!c)return p;s.checkSupport(c);var u=s.getTypeOf(p);return g[u][c](p)},s.resolve=function(c){for(var p=c.split("/"),u=[],y=0;y<p.length;y++){var C=p[y];C==="."||C===""&&y!==0&&y!==p.length-1||(C===".."?u.pop():u.push(C))}return u.join("/")},s.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(c)?"nodebuffer":n.uint8array&&c instanceof Uint8Array?"uint8array":n.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(c){if(!n[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(c){var p,u,y="";for(u=0;u<(c||"").length;u++)y+="\\x"+((p=c.charCodeAt(u))<16?"0":"")+p.toString(16).toUpperCase();return y},s.delay=function(c,p,u){setImmediate(function(){c.apply(u||null,p||[])})},s.inherits=function(c,p){function u(){}u.prototype=p.prototype,c.prototype=new u},s.extend=function(){var c,p,u={};for(c=0;c<arguments.length;c++)for(p in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],p)&&u[p]===void 0&&(u[p]=arguments[c][p]);return u},s.prepareContent=function(c,p,u,y,C){return d.Promise.resolve(p).then(function(A){return n.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new d.Promise(function(T,U){var E=new FileReader;E.onload=function(z){T(z.target.result)},E.onerror=function(z){U(z.target.error)},E.readAsArrayBuffer(A)}):A}).then(function(A){var T=s.getTypeOf(A);return T?(T==="arraybuffer"?A=s.transformTo("uint8array",A):T==="string"&&(C?A=a.decode(A):u&&y!==!0&&(A=function(U){return k(U,n.uint8array?new Uint8Array(U.length):new Array(U.length))}(A))),A):d.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,l,s){var n=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),d=t("./zipEntry"),m=t("./support");function k(b){this.files=[],this.loadOptions=b}k.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(_)+", expected "+a.pretty(b)+")")}},isSignature:function(b,_){var h=this.reader.index;this.reader.setIndex(b);var g=this.reader.readString(4)===_;return this.reader.setIndex(h),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),_=m.uint8array?"uint8array":"array",h=a.transformTo(_,b);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,_,h,g=this.zip64EndOfCentralSize-44;0<g;)b=this.reader.readInt(2),_=this.reader.readInt(4),h=this.reader.readData(_),this.zip64ExtensibleData[b]={id:b,length:_,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,_;for(b=0;b<this.files.length;b++)_=this.files[b],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(b=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var _=b;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var g=_-h;if(0<g)this.isSignature(_,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(b){this.reader=n(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},l.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,l,s){var n=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),d=t("./crc32"),m=t("./utf8"),k=t("./compressions"),b=t("./support");function _(h,g){this.options=h,this.loadOptions=g}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var g,c;if(h.skip(22),this.fileNameLength=h.readInt(2),c=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(p){for(var u in k)if(Object.prototype.hasOwnProperty.call(k,u)&&k[u].magic===p)return k[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var g=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(g),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var g,c,p,u=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<u;)g=h.readInt(2),c=h.readInt(2),p=h.readData(c),this.extraFields[g]={id:g,length:c,value:p};h.setIndex(u)},handleUTF8:function(){var h=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var c=a.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var u=a.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var g=n(h.value);return g.readInt(1)!==1||d(this.fileName)!==g.readInt(4)?null:m.utf8decode(g.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var g=n(h.value);return g.readInt(1)!==1||d(this.fileComment)!==g.readInt(4)?null:m.utf8decode(g.readData(h.length-5))}return null}},l.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,l,s){function n(g,c,p){this.name=g,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=c,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),d=t("./utf8"),m=t("./compressedObject"),k=t("./stream/GenericWorker");n.prototype={internalStream:function(g){var c=null,p="string";try{if(!g)throw new Error("No output type specified.");var u=(p=g.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),c=this._decompressWorker();var y=!this._dataBinary;y&&!u&&(c=c.pipe(new d.Utf8EncodeWorker)),!y&&u&&(c=c.pipe(new d.Utf8DecodeWorker))}catch(C){(c=new k("error")).error(C)}return new a(c,p,"")},async:function(g,c){return this.internalStream(g).accumulate(c)},nodeStream:function(g,c){return this.internalStream(g||"nodebuffer").toNodejsStream(c)},_compressWorker:function(g,c){if(this._data instanceof m&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new d.Utf8EncodeWorker)),m.createWorkerFrom(p,g,c)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof k?this._data:new o(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<b.length;h++)n.prototype[b[h]]=_;l.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,l,s){(function(n){var a,o,d=n.MutationObserver||n.WebKitMutationObserver;if(d){var m=0,k=new d(g),b=n.document.createTextNode("");k.observe(b,{characterData:!0}),a=function(){b.data=m=++m%2}}else if(n.setImmediate||n.MessageChannel===void 0)a="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var c=n.document.createElement("script");c.onreadystatechange=function(){g(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},n.document.documentElement.appendChild(c)}:function(){setTimeout(g,0)};else{var _=new n.MessageChannel;_.port1.onmessage=g,a=function(){_.port2.postMessage(0)}}var h=[];function g(){var c,p;o=!0;for(var u=h.length;u;){for(p=h,h=[],c=-1;++c<u;)p[c]();u=h.length}o=!1}l.exports=function(c){h.push(c)!==1||o||a()}}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,l,s){var n=t("immediate");function a(){}var o={},d=["REJECTED"],m=["FULFILLED"],k=["PENDING"];function b(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,u!==a&&c(this,u)}function _(u,y,C){this.promise=u,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function h(u,y,C){n(function(){var A;try{A=y(C)}catch(T){return o.reject(u,T)}A===u?o.reject(u,new TypeError("Cannot resolve promise with itself")):o.resolve(u,A)})}function g(u){var y=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof y=="function")return function(){y.apply(u,arguments)}}function c(u,y){var C=!1;function A(E){C||(C=!0,o.reject(u,E))}function T(E){C||(C=!0,o.resolve(u,E))}var U=p(function(){y(T,A)});U.status==="error"&&A(U.value)}function p(u,y){var C={};try{C.value=u(y),C.status="success"}catch(A){C.status="error",C.value=A}return C}(l.exports=b).prototype.finally=function(u){if(typeof u!="function")return this;var y=this.constructor;return this.then(function(C){return y.resolve(u()).then(function(){return C})},function(C){return y.resolve(u()).then(function(){throw C})})},b.prototype.catch=function(u){return this.then(null,u)},b.prototype.then=function(u,y){if(typeof u!="function"&&this.state===m||typeof y!="function"&&this.state===d)return this;var C=new this.constructor(a);return this.state!==k?h(C,this.state===m?u:y,this.outcome):this.queue.push(new _(C,u,y)),C},_.prototype.callFulfilled=function(u){o.resolve(this.promise,u)},_.prototype.otherCallFulfilled=function(u){h(this.promise,this.onFulfilled,u)},_.prototype.callRejected=function(u){o.reject(this.promise,u)},_.prototype.otherCallRejected=function(u){h(this.promise,this.onRejected,u)},o.resolve=function(u,y){var C=p(g,y);if(C.status==="error")return o.reject(u,C.value);var A=C.value;if(A)c(u,A);else{u.state=m,u.outcome=y;for(var T=-1,U=u.queue.length;++T<U;)u.queue[T].callFulfilled(y)}return u},o.reject=function(u,y){u.state=d,u.outcome=y;for(var C=-1,A=u.queue.length;++C<A;)u.queue[C].callRejected(y);return u},b.resolve=function(u){return u instanceof this?u:o.resolve(new this(a),u)},b.reject=function(u){var y=new this(a);return o.reject(y,u)},b.all=function(u){var y=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=u.length,A=!1;if(!C)return this.resolve([]);for(var T=new Array(C),U=0,E=-1,z=new this(a);++E<C;)x(u[E],E);return z;function x(R,G){y.resolve(R).then(function(w){T[G]=w,++U!==C||A||(A=!0,o.resolve(z,T))},function(w){A||(A=!0,o.reject(z,w))})}},b.race=function(u){var y=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=u.length,A=!1;if(!C)return this.resolve([]);for(var T=-1,U=new this(a);++T<C;)E=u[T],y.resolve(E).then(function(z){A||(A=!0,o.resolve(U,z))},function(z){A||(A=!0,o.reject(U,z))});var E;return U}},{immediate:36}],38:[function(t,l,s){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),l.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,l,s){var n=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),d=t("./zlib/messages"),m=t("./zlib/zstream"),k=Object.prototype.toString,b=0,_=-1,h=0,g=8;function c(u){if(!(this instanceof c))return new c(u);this.options=a.assign({level:_,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},u||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var C=n.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(C!==b)throw new Error(d[C]);if(y.header&&n.deflateSetHeader(this.strm,y.header),y.dictionary){var A;if(A=typeof y.dictionary=="string"?o.string2buf(y.dictionary):k.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(C=n.deflateSetDictionary(this.strm,A))!==b)throw new Error(d[C]);this._dict_set=!0}}function p(u,y){var C=new c(y);if(C.push(u,!0),C.err)throw C.msg||d[C.err];return C.result}c.prototype.push=function(u,y){var C,A,T=this.strm,U=this.options.chunkSize;if(this.ended)return!1;A=y===~~y?y:y===!0?4:0,typeof u=="string"?T.input=o.string2buf(u):k.call(u)==="[object ArrayBuffer]"?T.input=new Uint8Array(u):T.input=u,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new a.Buf8(U),T.next_out=0,T.avail_out=U),(C=n.deflate(T,A))!==1&&C!==b)return this.onEnd(C),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(T.output,T.next_out))):this.onData(a.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&C!==1);return A===4?(C=n.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===b):A!==2||(this.onEnd(b),!(T.avail_out=0))},c.prototype.onData=function(u){this.chunks.push(u)},c.prototype.onEnd=function(u){u===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},s.Deflate=c,s.deflate=p,s.deflateRaw=function(u,y){return(y=y||{}).raw=!0,p(u,y)},s.gzip=function(u,y){return(y=y||{}).gzip=!0,p(u,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,l,s){var n=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),d=t("./zlib/constants"),m=t("./zlib/messages"),k=t("./zlib/zstream"),b=t("./zlib/gzheader"),_=Object.prototype.toString;function h(c){if(!(this instanceof h))return new h(c);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},c||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||c&&c.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var u=n.inflateInit2(this.strm,p.windowBits);if(u!==d.Z_OK)throw new Error(m[u]);this.header=new b,n.inflateGetHeader(this.strm,this.header)}function g(c,p){var u=new h(p);if(u.push(c,!0),u.err)throw u.msg||m[u.err];return u.result}h.prototype.push=function(c,p){var u,y,C,A,T,U,E=this.strm,z=this.options.chunkSize,x=this.options.dictionary,R=!1;if(this.ended)return!1;y=p===~~p?p:p===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof c=="string"?E.input=o.binstring2buf(c):_.call(c)==="[object ArrayBuffer]"?E.input=new Uint8Array(c):E.input=c,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(z),E.next_out=0,E.avail_out=z),(u=n.inflate(E,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&x&&(U=typeof x=="string"?o.string2buf(x):_.call(x)==="[object ArrayBuffer]"?new Uint8Array(x):x,u=n.inflateSetDictionary(this.strm,U)),u===d.Z_BUF_ERROR&&R===!0&&(u=d.Z_OK,R=!1),u!==d.Z_STREAM_END&&u!==d.Z_OK)return this.onEnd(u),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&u!==d.Z_STREAM_END&&(E.avail_in!==0||y!==d.Z_FINISH&&y!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=o.utf8border(E.output,E.next_out),A=E.next_out-C,T=o.buf2string(E.output,C),E.next_out=A,E.avail_out=z-A,A&&a.arraySet(E.output,E.output,C,A,0),this.onData(T)):this.onData(a.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(R=!0)}while((0<E.avail_in||E.avail_out===0)&&u!==d.Z_STREAM_END);return u===d.Z_STREAM_END&&(y=d.Z_FINISH),y===d.Z_FINISH?(u=n.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===d.Z_OK):y!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(E.avail_out=0))},h.prototype.onData=function(c){this.chunks.push(c)},h.prototype.onEnd=function(c){c===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},s.Inflate=h,s.inflate=g,s.inflateRaw=function(c,p){return(p=p||{}).raw=!0,g(c,p)},s.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,l,s){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(d){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var k=m.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var b in k)k.hasOwnProperty(b)&&(d[b]=k[b])}}return d},s.shrinkBuf=function(d,m){return d.length===m?d:d.subarray?d.subarray(0,m):(d.length=m,d)};var a={arraySet:function(d,m,k,b,_){if(m.subarray&&d.subarray)d.set(m.subarray(k,k+b),_);else for(var h=0;h<b;h++)d[_+h]=m[k+h]},flattenChunks:function(d){var m,k,b,_,h,g;for(m=b=0,k=d.length;m<k;m++)b+=d[m].length;for(g=new Uint8Array(b),m=_=0,k=d.length;m<k;m++)h=d[m],g.set(h,_),_+=h.length;return g}},o={arraySet:function(d,m,k,b,_){for(var h=0;h<b;h++)d[_+h]=m[k+h]},flattenChunks:function(d){return[].concat.apply([],d)}};s.setTyped=function(d){d?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(n)},{}],42:[function(t,l,s){var n=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var d=new n.Buf8(256),m=0;m<256;m++)d[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function k(b,_){if(_<65537&&(b.subarray&&o||!b.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(b,_));for(var h="",g=0;g<_;g++)h+=String.fromCharCode(b[g]);return h}d[254]=d[254]=1,s.string2buf=function(b){var _,h,g,c,p,u=b.length,y=0;for(c=0;c<u;c++)(64512&(h=b.charCodeAt(c)))==55296&&c+1<u&&(64512&(g=b.charCodeAt(c+1)))==56320&&(h=65536+(h-55296<<10)+(g-56320),c++),y+=h<128?1:h<2048?2:h<65536?3:4;for(_=new n.Buf8(y),c=p=0;p<y;c++)(64512&(h=b.charCodeAt(c)))==55296&&c+1<u&&(64512&(g=b.charCodeAt(c+1)))==56320&&(h=65536+(h-55296<<10)+(g-56320),c++),h<128?_[p++]=h:(h<2048?_[p++]=192|h>>>6:(h<65536?_[p++]=224|h>>>12:(_[p++]=240|h>>>18,_[p++]=128|h>>>12&63),_[p++]=128|h>>>6&63),_[p++]=128|63&h);return _},s.buf2binstring=function(b){return k(b,b.length)},s.binstring2buf=function(b){for(var _=new n.Buf8(b.length),h=0,g=_.length;h<g;h++)_[h]=b.charCodeAt(h);return _},s.buf2string=function(b,_){var h,g,c,p,u=_||b.length,y=new Array(2*u);for(h=g=0;h<u;)if((c=b[h++])<128)y[g++]=c;else if(4<(p=d[c]))y[g++]=65533,h+=p-1;else{for(c&=p===2?31:p===3?15:7;1<p&&h<u;)c=c<<6|63&b[h++],p--;1<p?y[g++]=65533:c<65536?y[g++]=c:(c-=65536,y[g++]=55296|c>>10&1023,y[g++]=56320|1023&c)}return k(y,g)},s.utf8border=function(b,_){var h;for((_=_||b.length)>b.length&&(_=b.length),h=_-1;0<=h&&(192&b[h])==128;)h--;return h<0||h===0?_:h+d[b[h]]>_?h:_}},{"./common":41}],43:[function(t,l,s){l.exports=function(n,a,o,d){for(var m=65535&n|0,k=n>>>16&65535|0,b=0;o!==0;){for(o-=b=2e3<o?2e3:o;k=k+(m=m+a[d++]|0)|0,--b;);m%=65521,k%=65521}return m|k<<16|0}},{}],44:[function(t,l,s){l.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,l,s){var n=function(){for(var a,o=[],d=0;d<256;d++){a=d;for(var m=0;m<8;m++)a=1&a?3988292384^a>>>1:a>>>1;o[d]=a}return o}();l.exports=function(a,o,d,m){var k=n,b=m+d;a^=-1;for(var _=m;_<b;_++)a=a>>>8^k[255&(a^o[_])];return-1^a}},{}],46:[function(t,l,s){var n,a=t("../utils/common"),o=t("./trees"),d=t("./adler32"),m=t("./crc32"),k=t("./messages"),b=0,_=4,h=0,g=-2,c=-1,p=4,u=2,y=8,C=9,A=286,T=30,U=19,E=2*A+1,z=15,x=3,R=258,G=R+x+1,w=42,I=113,r=1,D=2,tt=3,V=4;function it(i,N){return i.msg=k[N],N}function j(i){return(i<<1)-(4<i?9:0)}function X(i){for(var N=i.length;0<=--N;)i[N]=0}function L(i){var N=i.state,O=N.pending;O>i.avail_out&&(O=i.avail_out),O!==0&&(a.arraySet(i.output,N.pending_buf,N.pending_out,O,i.next_out),i.next_out+=O,N.pending_out+=O,i.total_out+=O,i.avail_out-=O,N.pending-=O,N.pending===0&&(N.pending_out=0))}function B(i,N){o._tr_flush_block(i,0<=i.block_start?i.block_start:-1,i.strstart-i.block_start,N),i.block_start=i.strstart,L(i.strm)}function Y(i,N){i.pending_buf[i.pending++]=N}function q(i,N){i.pending_buf[i.pending++]=N>>>8&255,i.pending_buf[i.pending++]=255&N}function P(i,N){var O,v,f=i.max_chain_length,S=i.strstart,F=i.prev_length,H=i.nice_match,M=i.strstart>i.w_size-G?i.strstart-(i.w_size-G):0,Z=i.window,$=i.w_mask,K=i.prev,et=i.strstart+R,ot=Z[S+F-1],st=Z[S+F];i.prev_length>=i.good_match&&(f>>=2),H>i.lookahead&&(H=i.lookahead);do if(Z[(O=N)+F]===st&&Z[O+F-1]===ot&&Z[O]===Z[S]&&Z[++O]===Z[S+1]){S+=2,O++;do;while(Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&Z[++S]===Z[++O]&&S<et);if(v=R-(et-S),S=et-R,F<v){if(i.match_start=N,H<=(F=v))break;ot=Z[S+F-1],st=Z[S+F]}}while((N=K[N&$])>M&&--f!=0);return F<=i.lookahead?F:i.lookahead}function Q(i){var N,O,v,f,S,F,H,M,Z,$,K=i.w_size;do{if(f=i.window_size-i.lookahead-i.strstart,i.strstart>=K+(K-G)){for(a.arraySet(i.window,i.window,K,K,0),i.match_start-=K,i.strstart-=K,i.block_start-=K,N=O=i.hash_size;v=i.head[--N],i.head[N]=K<=v?v-K:0,--O;);for(N=O=K;v=i.prev[--N],i.prev[N]=K<=v?v-K:0,--O;);f+=K}if(i.strm.avail_in===0)break;if(F=i.strm,H=i.window,M=i.strstart+i.lookahead,Z=f,$=void 0,$=F.avail_in,Z<$&&($=Z),O=$===0?0:(F.avail_in-=$,a.arraySet(H,F.input,F.next_in,$,M),F.state.wrap===1?F.adler=d(F.adler,H,$,M):F.state.wrap===2&&(F.adler=m(F.adler,H,$,M)),F.next_in+=$,F.total_in+=$,$),i.lookahead+=O,i.lookahead+i.insert>=x)for(S=i.strstart-i.insert,i.ins_h=i.window[S],i.ins_h=(i.ins_h<<i.hash_shift^i.window[S+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[S+x-1])&i.hash_mask,i.prev[S&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=S,S++,i.insert--,!(i.lookahead+i.insert<x)););}while(i.lookahead<G&&i.strm.avail_in!==0)}function rt(i,N){for(var O,v;;){if(i.lookahead<G){if(Q(i),i.lookahead<G&&N===b)return r;if(i.lookahead===0)break}if(O=0,i.lookahead>=x&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+x-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),O!==0&&i.strstart-O<=i.w_size-G&&(i.match_length=P(i,O)),i.match_length>=x)if(v=o._tr_tally(i,i.strstart-i.match_start,i.match_length-x),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=x){for(i.match_length--;i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+x-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart,--i.match_length!=0;);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else v=o._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(v&&(B(i,!1),i.strm.avail_out===0))return r}return i.insert=i.strstart<x-1?i.strstart:x-1,N===_?(B(i,!0),i.strm.avail_out===0?tt:V):i.last_lit&&(B(i,!1),i.strm.avail_out===0)?r:D}function J(i,N){for(var O,v,f;;){if(i.lookahead<G){if(Q(i),i.lookahead<G&&N===b)return r;if(i.lookahead===0)break}if(O=0,i.lookahead>=x&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+x-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=x-1,O!==0&&i.prev_length<i.max_lazy_match&&i.strstart-O<=i.w_size-G&&(i.match_length=P(i,O),i.match_length<=5&&(i.strategy===1||i.match_length===x&&4096<i.strstart-i.match_start)&&(i.match_length=x-1)),i.prev_length>=x&&i.match_length<=i.prev_length){for(f=i.strstart+i.lookahead-x,v=o._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-x),i.lookahead-=i.prev_length-1,i.prev_length-=2;++i.strstart<=f&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+x-1])&i.hash_mask,O=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),--i.prev_length!=0;);if(i.match_available=0,i.match_length=x-1,i.strstart++,v&&(B(i,!1),i.strm.avail_out===0))return r}else if(i.match_available){if((v=o._tr_tally(i,0,i.window[i.strstart-1]))&&B(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return r}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(v=o._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<x-1?i.strstart:x-1,N===_?(B(i,!0),i.strm.avail_out===0?tt:V):i.last_lit&&(B(i,!1),i.strm.avail_out===0)?r:D}function nt(i,N,O,v,f){this.good_length=i,this.max_lazy=N,this.nice_length=O,this.max_chain=v,this.func=f}function at(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*E),this.dyn_dtree=new a.Buf16(2*(2*T+1)),this.bl_tree=new a.Buf16(2*(2*U+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(z+1),this.heap=new a.Buf16(2*A+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*A+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(i){var N;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=u,(N=i.state).pending=0,N.pending_out=0,N.wrap<0&&(N.wrap=-N.wrap),N.status=N.wrap?w:I,i.adler=N.wrap===2?0:1,N.last_flush=b,o._tr_init(N),h):it(i,g)}function ut(i){var N=lt(i);return N===h&&function(O){O.window_size=2*O.w_size,X(O.head),O.max_lazy_match=n[O.level].max_lazy,O.good_match=n[O.level].good_length,O.nice_match=n[O.level].nice_length,O.max_chain_length=n[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=x-1,O.match_available=0,O.ins_h=0}(i.state),N}function ht(i,N,O,v,f,S){if(!i)return g;var F=1;if(N===c&&(N=6),v<0?(F=0,v=-v):15<v&&(F=2,v-=16),f<1||C<f||O!==y||v<8||15<v||N<0||9<N||S<0||p<S)return it(i,g);v===8&&(v=9);var H=new at;return(i.state=H).strm=i,H.wrap=F,H.gzhead=null,H.w_bits=v,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=f+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+x-1)/x),H.window=new a.Buf8(2*H.w_size),H.head=new a.Buf16(H.hash_size),H.prev=new a.Buf16(H.w_size),H.lit_bufsize=1<<f+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new a.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=N,H.strategy=S,H.method=O,ut(i)}n=[new nt(0,0,0,0,function(i,N){var O=65535;for(O>i.pending_buf_size-5&&(O=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Q(i),i.lookahead===0&&N===b)return r;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var v=i.block_start+O;if((i.strstart===0||i.strstart>=v)&&(i.lookahead=i.strstart-v,i.strstart=v,B(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-G&&(B(i,!1),i.strm.avail_out===0))return r}return i.insert=0,N===_?(B(i,!0),i.strm.avail_out===0?tt:V):(i.strstart>i.block_start&&(B(i,!1),i.strm.avail_out),r)}),new nt(4,4,8,4,rt),new nt(4,5,16,8,rt),new nt(4,6,32,32,rt),new nt(4,4,16,16,J),new nt(8,16,32,32,J),new nt(8,16,128,128,J),new nt(8,32,128,256,J),new nt(32,128,258,1024,J),new nt(32,258,258,4096,J)],s.deflateInit=function(i,N){return ht(i,N,y,15,8,0)},s.deflateInit2=ht,s.deflateReset=ut,s.deflateResetKeep=lt,s.deflateSetHeader=function(i,N){return i&&i.state?i.state.wrap!==2?g:(i.state.gzhead=N,h):g},s.deflate=function(i,N){var O,v,f,S;if(!i||!i.state||5<N||N<0)return i?it(i,g):g;if(v=i.state,!i.output||!i.input&&i.avail_in!==0||v.status===666&&N!==_)return it(i,i.avail_out===0?-5:g);if(v.strm=i,O=v.last_flush,v.last_flush=N,v.status===w)if(v.wrap===2)i.adler=0,Y(v,31),Y(v,139),Y(v,8),v.gzhead?(Y(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),Y(v,255&v.gzhead.time),Y(v,v.gzhead.time>>8&255),Y(v,v.gzhead.time>>16&255),Y(v,v.gzhead.time>>24&255),Y(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),Y(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(Y(v,255&v.gzhead.extra.length),Y(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(i.adler=m(i.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(Y(v,0),Y(v,0),Y(v,0),Y(v,0),Y(v,0),Y(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),Y(v,3),v.status=I);else{var F=y+(v.w_bits-8<<4)<<8;F|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(F|=32),F+=31-F%31,v.status=I,q(v,F),v.strstart!==0&&(q(v,i.adler>>>16),q(v,65535&i.adler)),i.adler=1}if(v.status===69)if(v.gzhead.extra){for(f=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>f&&(i.adler=m(i.adler,v.pending_buf,v.pending-f,f)),L(i),f=v.pending,v.pending!==v.pending_buf_size));)Y(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>f&&(i.adler=m(i.adler,v.pending_buf,v.pending-f,f)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){f=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>f&&(i.adler=m(i.adler,v.pending_buf,v.pending-f,f)),L(i),f=v.pending,v.pending===v.pending_buf_size)){S=1;break}S=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,Y(v,S)}while(S!==0);v.gzhead.hcrc&&v.pending>f&&(i.adler=m(i.adler,v.pending_buf,v.pending-f,f)),S===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){f=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>f&&(i.adler=m(i.adler,v.pending_buf,v.pending-f,f)),L(i),f=v.pending,v.pending===v.pending_buf_size)){S=1;break}S=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,Y(v,S)}while(S!==0);v.gzhead.hcrc&&v.pending>f&&(i.adler=m(i.adler,v.pending_buf,v.pending-f,f)),S===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&L(i),v.pending+2<=v.pending_buf_size&&(Y(v,255&i.adler),Y(v,i.adler>>8&255),i.adler=0,v.status=I)):v.status=I),v.pending!==0){if(L(i),i.avail_out===0)return v.last_flush=-1,h}else if(i.avail_in===0&&j(N)<=j(O)&&N!==_)return it(i,-5);if(v.status===666&&i.avail_in!==0)return it(i,-5);if(i.avail_in!==0||v.lookahead!==0||N!==b&&v.status!==666){var H=v.strategy===2?function(M,Z){for(var $;;){if(M.lookahead===0&&(Q(M),M.lookahead===0)){if(Z===b)return r;break}if(M.match_length=0,$=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,$&&(B(M,!1),M.strm.avail_out===0))return r}return M.insert=0,Z===_?(B(M,!0),M.strm.avail_out===0?tt:V):M.last_lit&&(B(M,!1),M.strm.avail_out===0)?r:D}(v,N):v.strategy===3?function(M,Z){for(var $,K,et,ot,st=M.window;;){if(M.lookahead<=R){if(Q(M),M.lookahead<=R&&Z===b)return r;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=x&&0<M.strstart&&(K=st[et=M.strstart-1])===st[++et]&&K===st[++et]&&K===st[++et]){ot=M.strstart+R;do;while(K===st[++et]&&K===st[++et]&&K===st[++et]&&K===st[++et]&&K===st[++et]&&K===st[++et]&&K===st[++et]&&K===st[++et]&&et<ot);M.match_length=R-(ot-et),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=x?($=o._tr_tally(M,1,M.match_length-x),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):($=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),$&&(B(M,!1),M.strm.avail_out===0))return r}return M.insert=0,Z===_?(B(M,!0),M.strm.avail_out===0?tt:V):M.last_lit&&(B(M,!1),M.strm.avail_out===0)?r:D}(v,N):n[v.level].func(v,N);if(H!==tt&&H!==V||(v.status=666),H===r||H===tt)return i.avail_out===0&&(v.last_flush=-1),h;if(H===D&&(N===1?o._tr_align(v):N!==5&&(o._tr_stored_block(v,0,0,!1),N===3&&(X(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),L(i),i.avail_out===0))return v.last_flush=-1,h}return N!==_?h:v.wrap<=0?1:(v.wrap===2?(Y(v,255&i.adler),Y(v,i.adler>>8&255),Y(v,i.adler>>16&255),Y(v,i.adler>>24&255),Y(v,255&i.total_in),Y(v,i.total_in>>8&255),Y(v,i.total_in>>16&255),Y(v,i.total_in>>24&255)):(q(v,i.adler>>>16),q(v,65535&i.adler)),L(i),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?h:1)},s.deflateEnd=function(i){var N;return i&&i.state?(N=i.state.status)!==w&&N!==69&&N!==73&&N!==91&&N!==103&&N!==I&&N!==666?it(i,g):(i.state=null,N===I?it(i,-3):h):g},s.deflateSetDictionary=function(i,N){var O,v,f,S,F,H,M,Z,$=N.length;if(!i||!i.state||(S=(O=i.state).wrap)===2||S===1&&O.status!==w||O.lookahead)return g;for(S===1&&(i.adler=d(i.adler,N,$,0)),O.wrap=0,$>=O.w_size&&(S===0&&(X(O.head),O.strstart=0,O.block_start=0,O.insert=0),Z=new a.Buf8(O.w_size),a.arraySet(Z,N,$-O.w_size,O.w_size,0),N=Z,$=O.w_size),F=i.avail_in,H=i.next_in,M=i.input,i.avail_in=$,i.next_in=0,i.input=N,Q(O);O.lookahead>=x;){for(v=O.strstart,f=O.lookahead-(x-1);O.ins_h=(O.ins_h<<O.hash_shift^O.window[v+x-1])&O.hash_mask,O.prev[v&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=v,v++,--f;);O.strstart=v,O.lookahead=x-1,Q(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=x-1,O.match_available=0,i.next_in=H,i.input=M,i.avail_in=F,O.wrap=S,h},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,l,s){l.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,l,s){l.exports=function(n,a){var o,d,m,k,b,_,h,g,c,p,u,y,C,A,T,U,E,z,x,R,G,w,I,r,D;o=n.state,d=n.next_in,r=n.input,m=d+(n.avail_in-5),k=n.next_out,D=n.output,b=k-(a-n.avail_out),_=k+(n.avail_out-257),h=o.dmax,g=o.wsize,c=o.whave,p=o.wnext,u=o.window,y=o.hold,C=o.bits,A=o.lencode,T=o.distcode,U=(1<<o.lenbits)-1,E=(1<<o.distbits)-1;t:do{C<15&&(y+=r[d++]<<C,C+=8,y+=r[d++]<<C,C+=8),z=A[y&U];e:for(;;){if(y>>>=x=z>>>24,C-=x,(x=z>>>16&255)===0)D[k++]=65535&z;else{if(!(16&x)){if(!(64&x)){z=A[(65535&z)+(y&(1<<x)-1)];continue e}if(32&x){o.mode=12;break t}n.msg="invalid literal/length code",o.mode=30;break t}R=65535&z,(x&=15)&&(C<x&&(y+=r[d++]<<C,C+=8),R+=y&(1<<x)-1,y>>>=x,C-=x),C<15&&(y+=r[d++]<<C,C+=8,y+=r[d++]<<C,C+=8),z=T[y&E];i:for(;;){if(y>>>=x=z>>>24,C-=x,!(16&(x=z>>>16&255))){if(!(64&x)){z=T[(65535&z)+(y&(1<<x)-1)];continue i}n.msg="invalid distance code",o.mode=30;break t}if(G=65535&z,C<(x&=15)&&(y+=r[d++]<<C,(C+=8)<x&&(y+=r[d++]<<C,C+=8)),h<(G+=y&(1<<x)-1)){n.msg="invalid distance too far back",o.mode=30;break t}if(y>>>=x,C-=x,(x=k-b)<G){if(c<(x=G-x)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break t}if(I=u,(w=0)===p){if(w+=g-x,x<R){for(R-=x;D[k++]=u[w++],--x;);w=k-G,I=D}}else if(p<x){if(w+=g+p-x,(x-=p)<R){for(R-=x;D[k++]=u[w++],--x;);if(w=0,p<R){for(R-=x=p;D[k++]=u[w++],--x;);w=k-G,I=D}}}else if(w+=p-x,x<R){for(R-=x;D[k++]=u[w++],--x;);w=k-G,I=D}for(;2<R;)D[k++]=I[w++],D[k++]=I[w++],D[k++]=I[w++],R-=3;R&&(D[k++]=I[w++],1<R&&(D[k++]=I[w++]))}else{for(w=k-G;D[k++]=D[w++],D[k++]=D[w++],D[k++]=D[w++],2<(R-=3););R&&(D[k++]=D[w++],1<R&&(D[k++]=D[w++]))}break}}break}}while(d<m&&k<_);d-=R=C>>3,y&=(1<<(C-=R<<3))-1,n.next_in=d,n.next_out=k,n.avail_in=d<m?m-d+5:5-(d-m),n.avail_out=k<_?_-k+257:257-(k-_),o.hold=y,o.bits=C}},{}],49:[function(t,l,s){var n=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),d=t("./inffast"),m=t("./inftrees"),k=1,b=2,_=0,h=-2,g=1,c=852,p=592;function u(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(w){var I;return w&&w.state?(I=w.state,w.total_in=w.total_out=I.total=0,w.msg="",I.wrap&&(w.adler=1&I.wrap),I.mode=g,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new n.Buf32(c),I.distcode=I.distdyn=new n.Buf32(p),I.sane=1,I.back=-1,_):h}function A(w){var I;return w&&w.state?((I=w.state).wsize=0,I.whave=0,I.wnext=0,C(w)):h}function T(w,I){var r,D;return w&&w.state?(D=w.state,I<0?(r=0,I=-I):(r=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?h:(D.window!==null&&D.wbits!==I&&(D.window=null),D.wrap=r,D.wbits=I,A(w))):h}function U(w,I){var r,D;return w?(D=new y,(w.state=D).window=null,(r=T(w,I))!==_&&(w.state=null),r):h}var E,z,x=!0;function R(w){if(x){var I;for(E=new n.Buf32(512),z=new n.Buf32(32),I=0;I<144;)w.lens[I++]=8;for(;I<256;)w.lens[I++]=9;for(;I<280;)w.lens[I++]=7;for(;I<288;)w.lens[I++]=8;for(m(k,w.lens,0,288,E,0,w.work,{bits:9}),I=0;I<32;)w.lens[I++]=5;m(b,w.lens,0,32,z,0,w.work,{bits:5}),x=!1}w.lencode=E,w.lenbits=9,w.distcode=z,w.distbits=5}function G(w,I,r,D){var tt,V=w.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new n.Buf8(V.wsize)),D>=V.wsize?(n.arraySet(V.window,I,r-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(D<(tt=V.wsize-V.wnext)&&(tt=D),n.arraySet(V.window,I,r-D,tt,V.wnext),(D-=tt)?(n.arraySet(V.window,I,r-D,D,0),V.wnext=D,V.whave=V.wsize):(V.wnext+=tt,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=tt))),0}s.inflateReset=A,s.inflateReset2=T,s.inflateResetKeep=C,s.inflateInit=function(w){return U(w,15)},s.inflateInit2=U,s.inflate=function(w,I){var r,D,tt,V,it,j,X,L,B,Y,q,P,Q,rt,J,nt,at,lt,ut,ht,i,N,O,v,f=0,S=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return h;(r=w.state).mode===12&&(r.mode=13),it=w.next_out,tt=w.output,X=w.avail_out,V=w.next_in,D=w.input,j=w.avail_in,L=r.hold,B=r.bits,Y=j,q=X,N=_;t:for(;;)switch(r.mode){case g:if(r.wrap===0){r.mode=13;break}for(;B<16;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(2&r.wrap&&L===35615){S[r.check=0]=255&L,S[1]=L>>>8&255,r.check=o(r.check,S,2,0),B=L=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&L)<<8)+(L>>8))%31){w.msg="incorrect header check",r.mode=30;break}if((15&L)!=8){w.msg="unknown compression method",r.mode=30;break}if(B-=4,i=8+(15&(L>>>=4)),r.wbits===0)r.wbits=i;else if(i>r.wbits){w.msg="invalid window size",r.mode=30;break}r.dmax=1<<i,w.adler=r.check=1,r.mode=512&L?10:12,B=L=0;break;case 2:for(;B<16;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(r.flags=L,(255&r.flags)!=8){w.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){w.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=L>>8&1),512&r.flags&&(S[0]=255&L,S[1]=L>>>8&255,r.check=o(r.check,S,2,0)),B=L=0,r.mode=3;case 3:for(;B<32;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}r.head&&(r.head.time=L),512&r.flags&&(S[0]=255&L,S[1]=L>>>8&255,S[2]=L>>>16&255,S[3]=L>>>24&255,r.check=o(r.check,S,4,0)),B=L=0,r.mode=4;case 4:for(;B<16;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}r.head&&(r.head.xflags=255&L,r.head.os=L>>8),512&r.flags&&(S[0]=255&L,S[1]=L>>>8&255,r.check=o(r.check,S,2,0)),B=L=0,r.mode=5;case 5:if(1024&r.flags){for(;B<16;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}r.length=L,r.head&&(r.head.extra_len=L),512&r.flags&&(S[0]=255&L,S[1]=L>>>8&255,r.check=o(r.check,S,2,0)),B=L=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(j<(P=r.length)&&(P=j),P&&(r.head&&(i=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,D,V,P,i)),512&r.flags&&(r.check=o(r.check,D,P,V)),j-=P,V+=P,r.length-=P),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(j===0)break t;for(P=0;i=D[V+P++],r.head&&i&&r.length<65536&&(r.head.name+=String.fromCharCode(i)),i&&P<j;);if(512&r.flags&&(r.check=o(r.check,D,P,V)),j-=P,V+=P,i)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(j===0)break t;for(P=0;i=D[V+P++],r.head&&i&&r.length<65536&&(r.head.comment+=String.fromCharCode(i)),i&&P<j;);if(512&r.flags&&(r.check=o(r.check,D,P,V)),j-=P,V+=P,i)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;B<16;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(L!==(65535&r.check)){w.msg="header crc mismatch",r.mode=30;break}B=L=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),w.adler=r.check=0,r.mode=12;break;case 10:for(;B<32;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}w.adler=r.check=u(L),B=L=0,r.mode=11;case 11:if(r.havedict===0)return w.next_out=it,w.avail_out=X,w.next_in=V,w.avail_in=j,r.hold=L,r.bits=B,2;w.adler=r.check=1,r.mode=12;case 12:if(I===5||I===6)break t;case 13:if(r.last){L>>>=7&B,B-=7&B,r.mode=27;break}for(;B<3;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}switch(r.last=1&L,B-=1,3&(L>>>=1)){case 0:r.mode=14;break;case 1:if(R(r),r.mode=20,I!==6)break;L>>>=2,B-=2;break t;case 2:r.mode=17;break;case 3:w.msg="invalid block type",r.mode=30}L>>>=2,B-=2;break;case 14:for(L>>>=7&B,B-=7&B;B<32;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if((65535&L)!=(L>>>16^65535)){w.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&L,B=L=0,r.mode=15,I===6)break t;case 15:r.mode=16;case 16:if(P=r.length){if(j<P&&(P=j),X<P&&(P=X),P===0)break t;n.arraySet(tt,D,V,P,it),j-=P,V+=P,X-=P,it+=P,r.length-=P;break}r.mode=12;break;case 17:for(;B<14;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(r.nlen=257+(31&L),L>>>=5,B-=5,r.ndist=1+(31&L),L>>>=5,B-=5,r.ncode=4+(15&L),L>>>=4,B-=4,286<r.nlen||30<r.ndist){w.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;B<3;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}r.lens[F[r.have++]]=7&L,L>>>=3,B-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},N=m(0,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,N){w.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;nt=(f=r.lencode[L&(1<<r.lenbits)-1])>>>16&255,at=65535&f,!((J=f>>>24)<=B);){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(at<16)L>>>=J,B-=J,r.lens[r.have++]=at;else{if(at===16){for(v=J+2;B<v;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(L>>>=J,B-=J,r.have===0){w.msg="invalid bit length repeat",r.mode=30;break}i=r.lens[r.have-1],P=3+(3&L),L>>>=2,B-=2}else if(at===17){for(v=J+3;B<v;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}B-=J,i=0,P=3+(7&(L>>>=J)),L>>>=3,B-=3}else{for(v=J+7;B<v;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}B-=J,i=0,P=11+(127&(L>>>=J)),L>>>=7,B-=7}if(r.have+P>r.nlen+r.ndist){w.msg="invalid bit length repeat",r.mode=30;break}for(;P--;)r.lens[r.have++]=i}}if(r.mode===30)break;if(r.lens[256]===0){w.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,O={bits:r.lenbits},N=m(k,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,N){w.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},N=m(b,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,N){w.msg="invalid distances set",r.mode=30;break}if(r.mode=20,I===6)break t;case 20:r.mode=21;case 21:if(6<=j&&258<=X){w.next_out=it,w.avail_out=X,w.next_in=V,w.avail_in=j,r.hold=L,r.bits=B,d(w,q),it=w.next_out,tt=w.output,X=w.avail_out,V=w.next_in,D=w.input,j=w.avail_in,L=r.hold,B=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;nt=(f=r.lencode[L&(1<<r.lenbits)-1])>>>16&255,at=65535&f,!((J=f>>>24)<=B);){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(nt&&!(240&nt)){for(lt=J,ut=nt,ht=at;nt=(f=r.lencode[ht+((L&(1<<lt+ut)-1)>>lt)])>>>16&255,at=65535&f,!(lt+(J=f>>>24)<=B);){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}L>>>=lt,B-=lt,r.back+=lt}if(L>>>=J,B-=J,r.back+=J,r.length=at,nt===0){r.mode=26;break}if(32&nt){r.back=-1,r.mode=12;break}if(64&nt){w.msg="invalid literal/length code",r.mode=30;break}r.extra=15&nt,r.mode=22;case 22:if(r.extra){for(v=r.extra;B<v;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}r.length+=L&(1<<r.extra)-1,L>>>=r.extra,B-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;nt=(f=r.distcode[L&(1<<r.distbits)-1])>>>16&255,at=65535&f,!((J=f>>>24)<=B);){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(!(240&nt)){for(lt=J,ut=nt,ht=at;nt=(f=r.distcode[ht+((L&(1<<lt+ut)-1)>>lt)])>>>16&255,at=65535&f,!(lt+(J=f>>>24)<=B);){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}L>>>=lt,B-=lt,r.back+=lt}if(L>>>=J,B-=J,r.back+=J,64&nt){w.msg="invalid distance code",r.mode=30;break}r.offset=at,r.extra=15&nt,r.mode=24;case 24:if(r.extra){for(v=r.extra;B<v;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}r.offset+=L&(1<<r.extra)-1,L>>>=r.extra,B-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){w.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(X===0)break t;if(P=q-X,r.offset>P){if((P=r.offset-P)>r.whave&&r.sane){w.msg="invalid distance too far back",r.mode=30;break}Q=P>r.wnext?(P-=r.wnext,r.wsize-P):r.wnext-P,P>r.length&&(P=r.length),rt=r.window}else rt=tt,Q=it-r.offset,P=r.length;for(X<P&&(P=X),X-=P,r.length-=P;tt[it++]=rt[Q++],--P;);r.length===0&&(r.mode=21);break;case 26:if(X===0)break t;tt[it++]=r.length,X--,r.mode=21;break;case 27:if(r.wrap){for(;B<32;){if(j===0)break t;j--,L|=D[V++]<<B,B+=8}if(q-=X,w.total_out+=q,r.total+=q,q&&(w.adler=r.check=r.flags?o(r.check,tt,q,it-q):a(r.check,tt,q,it-q)),q=X,(r.flags?L:u(L))!==r.check){w.msg="incorrect data check",r.mode=30;break}B=L=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;B<32;){if(j===0)break t;j--,L+=D[V++]<<B,B+=8}if(L!==(4294967295&r.total)){w.msg="incorrect length check",r.mode=30;break}B=L=0}r.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;case 32:default:return h}return w.next_out=it,w.avail_out=X,w.next_in=V,w.avail_in=j,r.hold=L,r.bits=B,(r.wsize||q!==w.avail_out&&r.mode<30&&(r.mode<27||I!==4))&&G(w,w.output,w.next_out,q-w.avail_out)?(r.mode=31,-4):(Y-=w.avail_in,q-=w.avail_out,w.total_in+=Y,w.total_out+=q,r.total+=q,r.wrap&&q&&(w.adler=r.check=r.flags?o(r.check,tt,q,w.next_out-q):a(r.check,tt,q,w.next_out-q)),w.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(Y==0&&q===0||I===4)&&N===_&&(N=-5),N)},s.inflateEnd=function(w){if(!w||!w.state)return h;var I=w.state;return I.window&&(I.window=null),w.state=null,_},s.inflateGetHeader=function(w,I){var r;return w&&w.state&&2&(r=w.state).wrap?((r.head=I).done=!1,_):h},s.inflateSetDictionary=function(w,I){var r,D=I.length;return w&&w.state?(r=w.state).wrap!==0&&r.mode!==11?h:r.mode===11&&a(1,I,D,0)!==r.check?-3:G(w,I,D,D)?(r.mode=31,-4):(r.havedict=1,_):h},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,l,s){var n=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(k,b,_,h,g,c,p,u){var y,C,A,T,U,E,z,x,R,G=u.bits,w=0,I=0,r=0,D=0,tt=0,V=0,it=0,j=0,X=0,L=0,B=null,Y=0,q=new n.Buf16(16),P=new n.Buf16(16),Q=null,rt=0;for(w=0;w<=15;w++)q[w]=0;for(I=0;I<h;I++)q[b[_+I]]++;for(tt=G,D=15;1<=D&&q[D]===0;D--);if(D<tt&&(tt=D),D===0)return g[c++]=20971520,g[c++]=20971520,u.bits=1,0;for(r=1;r<D&&q[r]===0;r++);for(tt<r&&(tt=r),w=j=1;w<=15;w++)if(j<<=1,(j-=q[w])<0)return-1;if(0<j&&(k===0||D!==1))return-1;for(P[1]=0,w=1;w<15;w++)P[w+1]=P[w]+q[w];for(I=0;I<h;I++)b[_+I]!==0&&(p[P[b[_+I]]++]=I);if(E=k===0?(B=Q=p,19):k===1?(B=a,Y-=257,Q=o,rt-=257,256):(B=d,Q=m,-1),w=r,U=c,it=I=L=0,A=-1,T=(X=1<<(V=tt))-1,k===1&&852<X||k===2&&592<X)return 1;for(;;){for(z=w-it,R=p[I]<E?(x=0,p[I]):p[I]>E?(x=Q[rt+p[I]],B[Y+p[I]]):(x=96,0),y=1<<w-it,r=C=1<<V;g[U+(L>>it)+(C-=y)]=z<<24|x<<16|R|0,C!==0;);for(y=1<<w-1;L&y;)y>>=1;if(y!==0?(L&=y-1,L+=y):L=0,I++,--q[w]==0){if(w===D)break;w=b[_+p[I]]}if(tt<w&&(L&T)!==A){for(it===0&&(it=tt),U+=r,j=1<<(V=w-it);V+it<D&&!((j-=q[V+it])<=0);)V++,j<<=1;if(X+=1<<V,k===1&&852<X||k===2&&592<X)return 1;g[A=L&T]=tt<<24|V<<16|U-c|0}}return L!==0&&(g[U+L]=w-it<<24|64<<16|0),u.bits=tt,0}},{"../utils/common":41}],51:[function(t,l,s){l.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,l,s){var n=t("../utils/common"),a=0,o=1;function d(f){for(var S=f.length;0<=--S;)f[S]=0}var m=0,k=29,b=256,_=b+1+k,h=30,g=19,c=2*_+1,p=15,u=16,y=7,C=256,A=16,T=17,U=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(_+2));d(G);var w=new Array(2*h);d(w);var I=new Array(512);d(I);var r=new Array(256);d(r);var D=new Array(k);d(D);var tt,V,it,j=new Array(h);function X(f,S,F,H,M){this.static_tree=f,this.extra_bits=S,this.extra_base=F,this.elems=H,this.max_length=M,this.has_stree=f&&f.length}function L(f,S){this.dyn_tree=f,this.max_code=0,this.stat_desc=S}function B(f){return f<256?I[f]:I[256+(f>>>7)]}function Y(f,S){f.pending_buf[f.pending++]=255&S,f.pending_buf[f.pending++]=S>>>8&255}function q(f,S,F){f.bi_valid>u-F?(f.bi_buf|=S<<f.bi_valid&65535,Y(f,f.bi_buf),f.bi_buf=S>>u-f.bi_valid,f.bi_valid+=F-u):(f.bi_buf|=S<<f.bi_valid&65535,f.bi_valid+=F)}function P(f,S,F){q(f,F[2*S],F[2*S+1])}function Q(f,S){for(var F=0;F|=1&f,f>>>=1,F<<=1,0<--S;);return F>>>1}function rt(f,S,F){var H,M,Z=new Array(p+1),$=0;for(H=1;H<=p;H++)Z[H]=$=$+F[H-1]<<1;for(M=0;M<=S;M++){var K=f[2*M+1];K!==0&&(f[2*M]=Q(Z[K]++,K))}}function J(f){var S;for(S=0;S<_;S++)f.dyn_ltree[2*S]=0;for(S=0;S<h;S++)f.dyn_dtree[2*S]=0;for(S=0;S<g;S++)f.bl_tree[2*S]=0;f.dyn_ltree[2*C]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function nt(f){8<f.bi_valid?Y(f,f.bi_buf):0<f.bi_valid&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function at(f,S,F,H){var M=2*S,Z=2*F;return f[M]<f[Z]||f[M]===f[Z]&&H[S]<=H[F]}function lt(f,S,F){for(var H=f.heap[F],M=F<<1;M<=f.heap_len&&(M<f.heap_len&&at(S,f.heap[M+1],f.heap[M],f.depth)&&M++,!at(S,H,f.heap[M],f.depth));)f.heap[F]=f.heap[M],F=M,M<<=1;f.heap[F]=H}function ut(f,S,F){var H,M,Z,$,K=0;if(f.last_lit!==0)for(;H=f.pending_buf[f.d_buf+2*K]<<8|f.pending_buf[f.d_buf+2*K+1],M=f.pending_buf[f.l_buf+K],K++,H===0?P(f,M,S):(P(f,(Z=r[M])+b+1,S),($=E[Z])!==0&&q(f,M-=D[Z],$),P(f,Z=B(--H),F),($=z[Z])!==0&&q(f,H-=j[Z],$)),K<f.last_lit;);P(f,C,S)}function ht(f,S){var F,H,M,Z=S.dyn_tree,$=S.stat_desc.static_tree,K=S.stat_desc.has_stree,et=S.stat_desc.elems,ot=-1;for(f.heap_len=0,f.heap_max=c,F=0;F<et;F++)Z[2*F]!==0?(f.heap[++f.heap_len]=ot=F,f.depth[F]=0):Z[2*F+1]=0;for(;f.heap_len<2;)Z[2*(M=f.heap[++f.heap_len]=ot<2?++ot:0)]=1,f.depth[M]=0,f.opt_len--,K&&(f.static_len-=$[2*M+1]);for(S.max_code=ot,F=f.heap_len>>1;1<=F;F--)lt(f,Z,F);for(M=et;F=f.heap[1],f.heap[1]=f.heap[f.heap_len--],lt(f,Z,1),H=f.heap[1],f.heap[--f.heap_max]=F,f.heap[--f.heap_max]=H,Z[2*M]=Z[2*F]+Z[2*H],f.depth[M]=(f.depth[F]>=f.depth[H]?f.depth[F]:f.depth[H])+1,Z[2*F+1]=Z[2*H+1]=M,f.heap[1]=M++,lt(f,Z,1),2<=f.heap_len;);f.heap[--f.heap_max]=f.heap[1],function(st,ft){var yt,pt,_t,ct,xt,Bt,mt=ft.dyn_tree,Nt=ft.max_code,$t=ft.stat_desc.static_tree,Jt=ft.stat_desc.has_stree,Xt=ft.stat_desc.extra_bits,Vt=ft.stat_desc.extra_base,kt=ft.stat_desc.max_length,Et=0;for(ct=0;ct<=p;ct++)st.bl_count[ct]=0;for(mt[2*st.heap[st.heap_max]+1]=0,yt=st.heap_max+1;yt<c;yt++)kt<(ct=mt[2*mt[2*(pt=st.heap[yt])+1]+1]+1)&&(ct=kt,Et++),mt[2*pt+1]=ct,Nt<pt||(st.bl_count[ct]++,xt=0,Vt<=pt&&(xt=Xt[pt-Vt]),Bt=mt[2*pt],st.opt_len+=Bt*(ct+xt),Jt&&(st.static_len+=Bt*($t[2*pt+1]+xt)));if(Et!==0){do{for(ct=kt-1;st.bl_count[ct]===0;)ct--;st.bl_count[ct]--,st.bl_count[ct+1]+=2,st.bl_count[kt]--,Et-=2}while(0<Et);for(ct=kt;ct!==0;ct--)for(pt=st.bl_count[ct];pt!==0;)Nt<(_t=st.heap[--yt])||(mt[2*_t+1]!==ct&&(st.opt_len+=(ct-mt[2*_t+1])*mt[2*_t],mt[2*_t+1]=ct),pt--)}}(f,S),rt(Z,ot,f.bl_count)}function i(f,S,F){var H,M,Z=-1,$=S[1],K=0,et=7,ot=4;for($===0&&(et=138,ot=3),S[2*(F+1)+1]=65535,H=0;H<=F;H++)M=$,$=S[2*(H+1)+1],++K<et&&M===$||(K<ot?f.bl_tree[2*M]+=K:M!==0?(M!==Z&&f.bl_tree[2*M]++,f.bl_tree[2*A]++):K<=10?f.bl_tree[2*T]++:f.bl_tree[2*U]++,Z=M,ot=(K=0)===$?(et=138,3):M===$?(et=6,3):(et=7,4))}function N(f,S,F){var H,M,Z=-1,$=S[1],K=0,et=7,ot=4;for($===0&&(et=138,ot=3),H=0;H<=F;H++)if(M=$,$=S[2*(H+1)+1],!(++K<et&&M===$)){if(K<ot)for(;P(f,M,f.bl_tree),--K!=0;);else M!==0?(M!==Z&&(P(f,M,f.bl_tree),K--),P(f,A,f.bl_tree),q(f,K-3,2)):K<=10?(P(f,T,f.bl_tree),q(f,K-3,3)):(P(f,U,f.bl_tree),q(f,K-11,7));Z=M,ot=(K=0)===$?(et=138,3):M===$?(et=6,3):(et=7,4)}}d(j);var O=!1;function v(f,S,F,H){q(f,(m<<1)+(H?1:0),3),function(M,Z,$,K){nt(M),Y(M,$),Y(M,~$),n.arraySet(M.pending_buf,M.window,Z,$,M.pending),M.pending+=$}(f,S,F)}s._tr_init=function(f){O||(function(){var S,F,H,M,Z,$=new Array(p+1);for(M=H=0;M<k-1;M++)for(D[M]=H,S=0;S<1<<E[M];S++)r[H++]=M;for(r[H-1]=M,M=Z=0;M<16;M++)for(j[M]=Z,S=0;S<1<<z[M];S++)I[Z++]=M;for(Z>>=7;M<h;M++)for(j[M]=Z<<7,S=0;S<1<<z[M]-7;S++)I[256+Z++]=M;for(F=0;F<=p;F++)$[F]=0;for(S=0;S<=143;)G[2*S+1]=8,S++,$[8]++;for(;S<=255;)G[2*S+1]=9,S++,$[9]++;for(;S<=279;)G[2*S+1]=7,S++,$[7]++;for(;S<=287;)G[2*S+1]=8,S++,$[8]++;for(rt(G,_+1,$),S=0;S<h;S++)w[2*S+1]=5,w[2*S]=Q(S,5);tt=new X(G,E,b+1,_,p),V=new X(w,z,0,h,p),it=new X(new Array(0),x,0,g,y)}(),O=!0),f.l_desc=new L(f.dyn_ltree,tt),f.d_desc=new L(f.dyn_dtree,V),f.bl_desc=new L(f.bl_tree,it),f.bi_buf=0,f.bi_valid=0,J(f)},s._tr_stored_block=v,s._tr_flush_block=function(f,S,F,H){var M,Z,$=0;0<f.level?(f.strm.data_type===2&&(f.strm.data_type=function(K){var et,ot=4093624447;for(et=0;et<=31;et++,ot>>>=1)if(1&ot&&K.dyn_ltree[2*et]!==0)return a;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return o;for(et=32;et<b;et++)if(K.dyn_ltree[2*et]!==0)return o;return a}(f)),ht(f,f.l_desc),ht(f,f.d_desc),$=function(K){var et;for(i(K,K.dyn_ltree,K.l_desc.max_code),i(K,K.dyn_dtree,K.d_desc.max_code),ht(K,K.bl_desc),et=g-1;3<=et&&K.bl_tree[2*R[et]+1]===0;et--);return K.opt_len+=3*(et+1)+5+5+4,et}(f),M=f.opt_len+3+7>>>3,(Z=f.static_len+3+7>>>3)<=M&&(M=Z)):M=Z=F+5,F+4<=M&&S!==-1?v(f,S,F,H):f.strategy===4||Z===M?(q(f,2+(H?1:0),3),ut(f,G,w)):(q(f,4+(H?1:0),3),function(K,et,ot,st){var ft;for(q(K,et-257,5),q(K,ot-1,5),q(K,st-4,4),ft=0;ft<st;ft++)q(K,K.bl_tree[2*R[ft]+1],3);N(K,K.dyn_ltree,et-1),N(K,K.dyn_dtree,ot-1)}(f,f.l_desc.max_code+1,f.d_desc.max_code+1,$+1),ut(f,f.dyn_ltree,f.dyn_dtree)),J(f),H&&nt(f)},s._tr_tally=function(f,S,F){return f.pending_buf[f.d_buf+2*f.last_lit]=S>>>8&255,f.pending_buf[f.d_buf+2*f.last_lit+1]=255&S,f.pending_buf[f.l_buf+f.last_lit]=255&F,f.last_lit++,S===0?f.dyn_ltree[2*F]++:(f.matches++,S--,f.dyn_ltree[2*(r[F]+b+1)]++,f.dyn_dtree[2*B(S)]++),f.last_lit===f.lit_bufsize-1},s._tr_align=function(f){q(f,2,3),P(f,C,G),function(S){S.bi_valid===16?(Y(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(f)}},{"../utils/common":41}],53:[function(t,l,s){l.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,l,s){(function(n){(function(a,o){if(!a.setImmediate){var d,m,k,b,_=1,h={},g=!1,c=a.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(a);p=p&&p.setTimeout?p:a,d={}.toString.call(a.process)==="[object process]"?function(A){process.nextTick(function(){y(A)})}:function(){if(a.postMessage&&!a.importScripts){var A=!0,T=a.onmessage;return a.onmessage=function(){A=!1},a.postMessage("","*"),a.onmessage=T,A}}()?(b="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",C,!1):a.attachEvent("onmessage",C),function(A){a.postMessage(b+A,"*")}):a.MessageChannel?((k=new MessageChannel).port1.onmessage=function(A){y(A.data)},function(A){k.port2.postMessage(A)}):c&&"onreadystatechange"in c.createElement("script")?(m=c.documentElement,function(A){var T=c.createElement("script");T.onreadystatechange=function(){y(A),T.onreadystatechange=null,m.removeChild(T),T=null},m.appendChild(T)}):function(A){setTimeout(y,0,A)},p.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var T=new Array(arguments.length-1),U=0;U<T.length;U++)T[U]=arguments[U+1];var E={callback:A,args:T};return h[_]=E,d(_),_++},p.clearImmediate=u}function u(A){delete h[A]}function y(A){if(g)setTimeout(y,0,A);else{var T=h[A];if(T){g=!0;try{(function(U){var E=U.callback,z=U.args;switch(z.length){case 0:E();break;case 1:E(z[0]);break;case 2:E(z[0],z[1]);break;case 3:E(z[0],z[1],z[2]);break;default:E.apply(o,z)}})(T)}finally{u(A),g=!1}}}}function C(A){A.source===a&&typeof A.data=="string"&&A.data.indexOf(b)===0&&y(+A.data.slice(b.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof vt<"u"?vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Pt)),Pt.exports}var Pe=Oe();const Re=Gt(Pe);class De{constructor(e,t){this.snapshotsModel=e,this.notificationCenter=t,this.notificationCenter.subscribe("saveSnapshot",this.saveSnapshot.bind(this))}toggleSnapshots(){this.notificationCenter.publish("refreshAppView")}saveSnapshot(){this.snapshotsModel.saveSnapshot()}getSnapshots(){return this.snapshotsModel.getSnapshots()}loadSnapshot(e){const t=this.getSnapshots();this.notificationCenter.publish("loadSnapshot",{snapshot:t[e]})}changeSnapshotName(e,t){this.snapshotsModel.changeSnapshotName(e,t)}removeSnapshot(e){this.snapshotsModel.removeSnapshot(e)}clearAllSnapshots(){this.snapshotsModel.clearAllSnapshots()}importSnapshots(e){this.snapshotsModel.importSnapshots(e)}exportSnapshotsAsImages(){const e=document.querySelectorAll(".snapshot-tierlist"),t=new Re,l=[];for(let s=0;s<e.length;s++){const n=e[s],a=qt.toBlob(n).then(function(o){t.file("tierlist"+s+".png",o)});l.push(a)}Promise.all(l).then(()=>{t.generateAsync({type:"blob"}).then(function(s){ze.saveAs(s,"tierlists.zip")})})}}class Ne{constructor(e,t){this.settingsModel=e,this.notificationCenter=t}getSettings(){return this.settingsModel.getSettings()}setChampionIconPadding(e){const t=this.getSettings();t.championIconPadding=e,this.settingsModel.saveSettings(t),this.notificationCenter.publish("championIconPaddingChanged")}setChampionNamesOnHoverInTheTierlist(){const e=this.getSettings();e.championNamesDisplayOnHoverInTheTierlist=!e.championNamesDisplayOnHoverInTheTierlist,this.settingsModel.saveSettings(e),this.notificationCenter.publish("championNamesDisplayOnHoverInTheTierlistChanged")}setChampionNamesOnHoverInTheChampionSelection(){const e=this.getSettings();e.championNamesDisplayOnHoverInTheChampionSelection=!e.championNamesDisplayOnHoverInTheChampionSelection,this.settingsModel.saveSettings(e),this.notificationCenter.publish("championNamesDisplayOnHoverInTheChampionSelectionChanged")}resetSettings(){this.settingsModel.resetSettings(),this.notificationCenter.publish("championIconPaddingChanged"),this.notificationCenter.publish("championNamesDisplayOnHoverInTheTierlistChanged"),this.notificationCenter.publish("championNamesDisplayOnHoverInTheChampionSelectionChanged")}}class Ve{constructor(){this.default_settings={championIconPadding:"0",championNamesDisplayOnHoverInTheTierlist:!0,championNamesDisplayOnHoverInTheChampionSelection:!0}}saveSettings(e){localStorage.setItem(wt.settingsSaveLocation,JSON.stringify(e))}getSettings(){const e=localStorage.getItem(wt.settingsSaveLocation);return e==null?this.default_settings:this.validateSettings(JSON.parse(e))}validateSettings(e){const t=["championIconPadding","championNamesDisplayOnHoverInTheTierlist","championNamesDisplayOnHoverInTheChampionSelection"],l={};for(let s=0;s<t.length;s++){const n=t[s];e[n]==null?l[n]=this.default_settings[n]:l[n]=e[n]}return l}resetSettings(){this.saveSettings(this.default_settings)}}class Ue{constructor(e){this.notificationCenter=e}}class Fe{constructor(e){this.notificationCenter=e;const t=new Ve;this.settingsViewModel=new Ne(t,this.notificationCenter),this.mainScreenViewModel=new Ie(e,this.settingsViewModel),this.manualViewModel=new Ue(this.notificationCenter),this.keyboardViewModel=new Ae(this.notificationCenter);const l=new Be;this.snapshotsViewModel=new De(l,this.notificationCenter)}}class je{constructor(){this.subscribers={}}subscribe(e,t){this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t)}unsubscribe(e,t){this.subscribers[e]!=null&&(this.subscribers[e]=this.subscribers[e].filter(l=>l!==t))}publish(e,t){this.subscribers[e]!=null&&this.subscribers[e].forEach(l=>l(t))}}document.addEventListener("DOMContentLoaded",()=>{const W=new je,e=new Fe(W);new we(e).render()});document.documentElement.addEventListener("dragstart",()=>{event.target.draggable||event.preventDefault()});
